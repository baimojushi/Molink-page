<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Mo:link Design</title>
  <style>
    /* ==========================================
       Glassmorphism + 视差滚动 + 微交互
       ========================================== */
    :root {
      /* 品牌色系 */
      --color-primary: #6b4c3b;
      --color-primary-light: #8b6f5e;
      --color-primary-pale: #f5efe9;
      --color-primary-dark: #4a3228;

      /* 强调色 */
      --color-accent: #7a9e7e;
      --color-accent-light: #a8c5ab;
      --color-accent-dark: #5a7e5e;

      /* 玻璃态效果 */
      --glass-bg: rgba(255, 255, 255, 0.15);
      --glass-border: rgba(255, 255, 255, 0.3);
      --glass-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
      --glass-blur: 12px;

      /* 中性色 */
      --color-text-primary: #2a2a2a;
      --color-text-secondary: #5a5a5a;
      --color-text-tertiary: #8a8a8a;
      --color-disabled-bg: rgba(240, 235, 229, 0.5);
      --color-disabled-text: #c8b8a8;

      /* 圆角 */
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;

      /* 动画参数 */
      --duration-fast: 0.2s;
      --duration-normal: 0.3s;
      --duration-slow: 0.5s;
      --easing-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
      --easing-smooth: cubic-bezier(0.4, 0, 0.2, 1);
      --easing-enter: cubic-bezier(0, 0, 0.2, 1);

      /* 滑出动画距离 */
      --slide-distance: 40px;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    /* ==========================================
       移动端全局优化
       ========================================== */
    html {
      /* 禁用iOS双击缩放 */
      touch-action: manipulation;
      /* 禁用iOS长按选择 */
      -webkit-user-select: none;
      user-select: none;
      /* 平滑滚动 */
      scroll-behavior: smooth;
    }

    /* 允许文本选择和输入框操作 */
    input, textarea, [contenteditable] {
      -webkit-user-select: text;
      user-select: text;
      touch-action: auto;
    }

    /* 禁用移动端点击蓝色高亮 */
    * {
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
    }

    /* ==========================================
       视差背景层
       ========================================== */
    body {
      font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative; /* 为absolute定位的背景提供定位上下文 */
      color: var(--color-text-primary);
      -webkit-font-smoothing: antialiased;
    }

    /* 背景图层 - 支持本地图片替换，跟随滚动但速度减半 */
    .parallax-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      min-height: 100vh; /* 最小高度为视口高度 */
      z-index: 0;
      opacity: 0.4;
      will-change: transform;
      
      /* 默认渐变背景 */
      background: linear-gradient(135deg, #f5efe9 0%, #e8dfd5 100%);
      
      /* 移动端图片背景（优先加载小尺寸） */
      background-image: url('/images/background-mobile.jpg');
      background-size: cover;
      background-position: center top;
      background-repeat: no-repeat;
      background-attachment: scroll;
    }

    /* PC端使用高清图片 */
    @media (min-width: 768px) {
      .parallax-bg {
        background-image: url('/images/background.jpg');
      }
    }

    /* 格网背景已移除，使用纯图片背景 */

    /* 白色噪点纹理 */
    .parallax-bg::after {
      content: '';
      position: absolute;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='3.5' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.08'/%3E%3C/svg%3E");
      opacity: 0.6;
      mix-blend-mode: overlay;
    }

    /* ==========================================
       页面头部 - 玻璃态
       ========================================== */
    .header {
      position: sticky;
      top: 0;
      z-index: 100;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      backdrop-filter: blur(var(--glass-blur)) saturate(180%);
      background: var(--glass-bg);
      border-bottom: 1px solid var(--glass-border);
      box-shadow: var(--glass-shadow);
    }

    .header-logo {
      font-size: 20px;
      font-weight: 700;
      letter-spacing: 0.5px;
      color: var(--color-primary-dark);
      transition: transform var(--duration-fast) var(--easing-bounce);
      cursor: default;
    }
    .header-logo:hover { transform: scale(1.05); }

    .header-sub {
      font-size: 12px;
      opacity: 0.7;
      margin-left: auto;
      color: var(--color-text-secondary);
    }

    /* ==========================================
       主容器 - 视差前景层
       ========================================== */
    .container {
      position: relative;
      z-index: 1;
      max-width: 480px;
      margin: 0 auto;
      padding: 20px 16px 40px;
    }

    /* 移动端优化：增加间距避免元素紧凑 */
    @media (max-width: 767px) {
      .container {
        padding: 24px 20px 60px;
      }
    }

    /* ==========================================
       分区卡片 - Glassmorphism
       ========================================== */
    .section {
      backdrop-filter: blur(var(--glass-blur)) saturate(180%);
      background: var(--glass-bg);
      border-radius: var(--radius-xl);
      padding: 20px;
      margin-bottom: 16px;
      box-shadow: var(--glass-shadow);
      border: 1px solid var(--glass-border);
      position: relative;
      
      /* 玻璃边缘反光效果 */
      background-image: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0.3) 0%,
        rgba(255, 255, 255, 0.05) 50%,
        rgba(255, 255, 255, 0.1) 100%
      );
      
      /* 初始状态：隐藏 */
      opacity: 0;
      transform: translateY(calc(-1 * var(--slide-distance)));
      max-height: 0;
      overflow: hidden;
      padding-top: 0;
      padding-bottom: 0;
      margin-bottom: 0;
      
      /* 动画过渡 */
      transition: 
        opacity var(--duration-slow) var(--easing-enter),
        transform var(--duration-slow) var(--easing-enter),
        max-height var(--duration-slow) var(--easing-enter),
        padding var(--duration-slow) var(--easing-enter),
        margin var(--duration-slow) var(--easing-enter);
    }
    
    /* 移动端：增加padding和margin，加宽玻璃边缘 */
    @media (max-width: 767px) {
      .section {
        padding: 24px;
        margin-bottom: 20px;
        border-width: 1.5px; /* 加宽边缘便于触摸设备识别 */
      }
      
      .section.visible {
        padding-top: 24px;
        padding-bottom: 24px;
        margin-bottom: 20px;
      }
    }
    
    /* 滑出显示状态 */
    .section.visible {
      opacity: 1;
      transform: translateY(0);
      max-height: 2000px;
      padding-top: 20px;
      padding-bottom: 20px;
      margin-bottom: 16px;
    }
    
    /* 第一个区域始终可见 */
    .section:first-of-type {
      opacity: 1;
      transform: translateY(0);
      max-height: none;
      padding: 20px;
      margin-bottom: 16px;
    }

    @media (max-width: 767px) {
      .section:first-of-type {
        padding: 24px;
        margin-bottom: 20px;
      }
    }

    /* 白色噪点纹理叠加到卡片 */
    .section::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: var(--radius-xl);
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='2.5' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E");
      pointer-events: none;
      mix-blend-mode: overlay;
    }

    .section-title {
      font-size: 14px;
      color: var(--color-text-secondary);
      margin-bottom: 14px;
      display: flex;
      align-items: center;
      gap: 6px;
      font-weight: 600;
    }
    .section-title::before {
      content: '';
      width: 3px;
      height: 14px;
      background: var(--color-primary);
      border-radius: 2px;
    }

    /* ==========================================
       服务类型选择按钮 - 微交互
       ========================================== */
    .service-btns {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    /* 移动端增加间距 */
    @media (max-width: 767px) {
      .service-btns {
        gap: 14px;
      }
    }

    .service-btn {
      padding: 14px 16px;
      border: 2px solid var(--glass-border);
      border-radius: var(--radius-md);
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(8px);
      font-size: 15px;
      color: var(--color-text-primary);
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing-smooth);
      text-align: left;
      display: flex;
      align-items: center;
      gap: 10px;
      position: relative;
      overflow: hidden;
    }

    /* 移动端增大可点击区域 */
    @media (max-width: 767px) {
      .service-btn {
        padding: 16px 18px;
        min-height: 56px; /* 符合移动端最小触控区域标准 */
      }
    }
    
    /* Micro-interaction: 按压弹性 */
    .service-btn:active { 
      transform: scale(0.98);
      transition-duration: var(--duration-fast);
    }
    
    /* PC端悬停光晕（触摸设备禁用） */
    .service-btn::after {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(122,158,126,0.15), transparent 50%);
      opacity: 0;
      transition: opacity var(--duration-normal) var(--easing-smooth);
    }
    
    @media (hover: hover) {
      .service-btn:hover::after { opacity: 1; }
    }
    
    .service-btn.active {
      border-color: var(--color-accent);
      background: rgba(122,158,126,0.2);
      color: var(--color-accent-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(122,158,126,0.2);
    }

    /* 移动端active状态不上移 */
    @media (max-width: 767px) {
      .service-btn.active {
        transform: translateY(0);
      }
    }
    
    .service-btn .icon {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      flex-shrink: 0;
      font-weight: 600;
      transition: all var(--duration-normal) var(--easing-bounce);
    }

    /* PC端悬停图标动效（触摸设备禁用） */
    @media (hover: hover) {
      .service-btn:hover .icon { transform: rotate(5deg) scale(1.1); }
    }

    .service-btn.active .icon {
      background: var(--color-accent);
      color: #fff;
    }
    .service-btn:not(.active) .icon {
      background: var(--color-disabled-bg);
      color: var(--color-text-tertiary);
    }

    /* ==========================================
       图片上传区域 - 微交互
       ========================================== */
    .upload-row {
      display: flex;
      gap: 12px;
    }

    /* 移动端增加间距 */
    @media (max-width: 767px) {
      .upload-row {
        gap: 16px;
      }
    }

    .upload-box {
      flex: 1;
      aspect-ratio: 1;
      border: 2px dashed var(--glass-border);
      border-radius: var(--radius-md);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing-smooth);
      position: relative;
      overflow: hidden;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(8px);
    }

    /* 移动端加宽边框便于识别 */
    @media (max-width: 767px) {
      .upload-box {
        border-width: 2.5px;
      }
    }
    
    /* PC端悬停提示（触摸设备禁用） */
    @media (hover: hover) {
      .upload-box:hover:not(.disabled) {
        border-color: var(--color-accent);
        transform: translateY(-3px);
        box-shadow: 0 6px 16px rgba(122,158,126,0.15);
      }
    }
    
    .upload-box:active:not(.disabled) { 
      transform: translateY(-1px) scale(0.98); 
    }

    /* 移动端点击反馈 */
    @media (max-width: 767px) {
      .upload-box:active:not(.disabled) {
        transform: scale(0.98);
        border-color: var(--color-accent);
      }
    }
    
    .upload-box.has-image {
      border-style: solid;
      border-color: var(--color-accent);
    }
    .upload-box.disabled {
      opacity: 0.35;
      pointer-events: none;
    }
    .upload-box .label {
      font-size: 13px;
      color: var(--color-text-secondary);
      margin-top: 8px;
      background: rgba(255,255,255,0.8);
      backdrop-filter: blur(4px);
      padding: 4px 10px;
      border-radius: 12px;
      transition: transform var(--duration-fast) var(--easing-bounce);
    }

    /* PC端悬停标签动效（触摸设备禁用） */
    @media (hover: hover) {
      .upload-box:hover .label { transform: scale(1.05); }
    }
    
    .upload-box .plus {
      font-size: 32px;
      color: var(--color-text-tertiary);
      line-height: 1;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(4px);
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all var(--duration-normal) var(--easing-bounce);
    }

    /* 移动端增大plus符号 */
    @media (max-width: 767px) {
      .upload-box .plus {
        width: 56px;
        height: 56px;
        font-size: 36px;
      }
    }

    /* PC端悬停plus动效（触摸设备禁用） */
    @media (hover: hover) {
      .upload-box:hover .plus { 
        transform: rotate(90deg) scale(1.1);
        background: rgba(122,158,126,0.3);
        color: var(--color-accent);
      }
    }
    
    .upload-box img.preview {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      animation: fadeIn 0.3s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    
    .upload-box .remove-btn {
      position: absolute;
      top: 6px;
      right: 6px;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(4px);
      color: #fff;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 5;
      cursor: pointer;
      transition: all var(--duration-fast) var(--easing-bounce);
      opacity: 0;
    }

    /* 移动端始终显示删除按钮，增大尺寸 */
    @media (max-width: 767px) {
      .upload-box .remove-btn {
        opacity: 1;
        width: 32px;
        height: 32px;
        font-size: 18px;
        top: 8px;
        right: 8px;
      }
    }

    /* PC端悬停显示 */
    @media (hover: hover) {
      .upload-box:hover .remove-btn { opacity: 1; }
    }

    .remove-btn:hover { 
      transform: scale(1.15) rotate(90deg);
      background: rgba(196,92,74,0.9);
    }

    /* 移动端点击反馈 */
    @media (max-width: 767px) {
      .remove-btn:active {
        transform: scale(0.9);
        background: rgba(196,92,74,0.9);
      }
    }
    
    .upload-box input[type="file"] { display: none; }

    /* ==========================================
       接收方式 - 微交互
       ========================================== */
    .receive-row {
      display: flex;
      gap: 8px;
      align-items: stretch;
      flex-wrap: nowrap;
    }

    /* 移动端增加间距 */
    @media (max-width: 767px) {
      .receive-row {
        gap: 10px;
      }
    }

    .receive-btn {
      padding: 12px 16px;
      border: 2px solid var(--glass-border);
      border-radius: var(--radius-md);
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(8px);
      font-size: 14px;
      color: var(--color-text-primary);
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing-smooth);
      white-space: nowrap;
      position: relative;
      overflow: hidden;
      flex-shrink: 0;
    }

    /* 移动端增大可点击区域 */
    @media (max-width: 767px) {
      .receive-btn {
        padding: 14px 18px;
        min-height: 48px;
        font-size: 15px;
      }
    }
    
    /* PC端波纹效果（触摸设备禁用） */
    .receive-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(122,158,126,0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s ease, height 0.6s ease;
    }

    @media (hover: hover) {
      .receive-btn:active::before {
        width: 300px;
        height: 300px;
      }
    }
    
    /* PC端悬停效果（触摸设备禁用） */
    @media (hover: hover) {
      .receive-btn:hover { 
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      }
    }

    /* 移动端点击反馈 */
    @media (max-width: 767px) {
      .receive-btn:active {
        transform: scale(0.98);
      }
    }

    .receive-btn.active {
      border-color: var(--color-accent);
      background: var(--color-accent);
      color: #fff;
    }
    
    .receive-input-wrap {
      flex: 1;
      min-width: 0; /* 关键：允许flex子元素缩小到内容以下 */
      overflow: hidden;
      max-width: 0;
      opacity: 0;
      transition: 
        max-width 0.4s var(--easing-smooth), 
        opacity var(--duration-normal) ease;
    }
    .receive-input-wrap.show {
      max-width: 100%; /* 使用百分比而非固定值 */
      opacity: 1;
    }
    .receive-input-wrap input {
      width: 100%;
      height: 100%;
      min-height: 44px;
      padding: 0 14px;
      border: 2px solid var(--glass-border);
      border-radius: var(--radius-md);
      font-size: 14px;
      color: var(--color-text-primary);
      background: rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(8px);
      outline: none;
      transition: all var(--duration-normal) var(--easing-smooth);
    }

    /* 移动端增大输入框 */
    @media (max-width: 767px) {
      .receive-input-wrap input {
        min-height: 48px;
        font-size: 15px;
        padding: 0 16px;
      }
    }

    .receive-input-wrap input:focus {
      border-color: var(--color-accent);
      transform: scale(1.01);
    }

    /* 移动端focus不缩放 */
    @media (max-width: 767px) {
      .receive-input-wrap input:focus {
        transform: scale(1);
      }
    }

    .receive-input-wrap input::placeholder {
      color: var(--color-text-tertiary);
    }

    /* ==========================================
       附加服务开关 - 微交互
       ========================================== */
    .toggle-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 4px 0;
    }

    /* 移动端增加padding */
    @media (max-width: 767px) {
      .toggle-row {
        padding: 8px 0;
      }
    }

    .toggle-label {
      font-size: 14px;
      color: var(--color-text-primary);
      flex: 1;
      line-height: 1.4;
    }

    /* 移动端增大字号 */
    @media (max-width: 767px) {
      .toggle-label {
        font-size: 15px;
      }
    }

    .toggle-label small {
      display: block;
      color: var(--color-text-secondary);
      font-size: 12px;
      margin-top: 2px;
    }

    @media (max-width: 767px) {
      .toggle-label small {
        font-size: 13px;
      }
    }

    .toggle-switch {
      width: 48px;
      height: 28px;
      background: rgba(200,184,168,0.3);
      backdrop-filter: blur(4px);
      border-radius: 14px;
      position: relative;
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing-smooth);
      flex-shrink: 0;
      margin-left: 12px;
    }

    /* 移动端增大开关尺寸 */
    @media (max-width: 767px) {
      .toggle-switch {
        width: 56px;
        height: 32px;
        border-radius: 16px;
        margin-left: 16px;
      }
    }

    /* PC端悬停效果（触摸设备禁用） */
    @media (hover: hover) {
      .toggle-switch:hover { transform: scale(1.05); }
    }

    /* 移动端点击反馈 */
    @media (max-width: 767px) {
      .toggle-switch:active { transform: scale(0.95); }
    }

    .toggle-switch.active {
      background: var(--color-accent);
    }
    .toggle-switch::after {
      content: '';
      width: 22px;
      height: 22px;
      background: #fff;
      border-radius: 50%;
      position: absolute;
      top: 3px;
      left: 3px;
      transition: left var(--duration-normal) var(--easing-bounce);
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    /* 移动端调整滑块尺寸 */
    @media (max-width: 767px) {
      .toggle-switch::after {
        width: 26px;
        height: 26px;
      }
    }

    .toggle-switch.active::after {
      left: 23px;
    }

    @media (max-width: 767px) {
      .toggle-switch.active::after {
        left: 27px;
      }
    }

    /* ==========================================
       提交按钮 - 强烈微交互
       ========================================== */
    .submit-btn {
      width: 100%;
      padding: 16px;
      border: none;
      border-radius: var(--radius-md);
      background: var(--color-primary);
      color: #fff;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing-smooth);
      letter-spacing: 2px;
      position: relative;
      overflow: hidden;
      
      /* 初始隐藏 */
      opacity: 0;
      transform: translateY(calc(-1 * var(--slide-distance)));
      pointer-events: none;
    }

    /* 移动端增大按钮高度 */
    @media (max-width: 767px) {
      .submit-btn {
        padding: 18px;
        font-size: 17px;
        min-height: 56px;
      }
    }

    .submit-btn.visible {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }
    
    /* PC端光晕扫过（触摸设备禁用） */
    .submit-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s ease;
    }

    @media (hover: hover) {
      .submit-btn:hover::before { left: 100%; }
      
      .submit-btn:hover:not(:disabled) {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(107,76,59,0.3);
      }
    }
    
    .submit-btn:active:not(:disabled) {
      transform: translateY(-1px) scale(0.98);
      background: var(--color-primary-dark);
    }

    /* 移动端点击反馈 */
    @media (max-width: 767px) {
      .submit-btn:active:not(:disabled) {
        transform: scale(0.98);
      }
    }

    .submit-btn:disabled {
      background: var(--color-disabled-bg);
      color: var(--color-disabled-text);
      cursor: not-allowed;
    }

    /* ==========================================
       Toast 通知（Vercel 风格）
       ========================================== */
    .toast-container {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 10px;
      pointer-events: none;
    }

    .toast {
      background: #000;
      color: #fff;
      padding: 12px 20px;
      border-radius: 8px;
      font-size: 14px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15), 0 0 0 1px rgba(255,255,255,0.1);
      display: flex;
      align-items: center;
      gap: 10px;
      pointer-events: auto;
      
      /* 入场动画 */
      animation: toastSlideIn 0.3s var(--easing-bounce);
      
      /* 淡出动画 */
      opacity: 1;
      transition: opacity 0.3s ease;
    }

    .toast.fade-out {
      opacity: 0;
    }

    @keyframes toastSlideIn {
      from {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .toast .icon {
      font-size: 16px;
      flex-shrink: 0;
    }

    /* ==========================================
       加载状态
       ========================================== */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255,255,255,0.3);
      border-top-color: #fff;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
      vertical-align: middle;
      margin-right: 8px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body>

  <!-- 视差背景层 -->
  <div class="parallax-bg"></div>

  <!-- Toast 通知容器 -->
  <div class="toast-container" id="toast-container"></div>

  <div class="header">
    <div class="header-logo">Mo:link Design</div>
    <div class="header-sub">艺术空间匹配服务</div>
  </div>

  <div class="container">

    <!-- 区域1: 服务类型选择（始终可见） -->
    <div class="section" id="section-service">
      <div class="section-title">服务类型选择</div>
      <div class="service-btns">
        <div class="service-btn" data-type="hang_in_home" onclick="选择服务(this)">
          <div class="icon">A</div>
          <div>作品挂进家</div>
        </div>
        <div class="service-btn" data-type="recommend_work" onclick="选择服务(this)">
          <div class="icon">B</div>
          <div>根据空间推荐作品</div>
        </div>
        <div class="service-btn" data-type="recommend_space" onclick="选择服务(this)">
          <div class="icon">C</div>
          <div>根据作品推荐空间</div>
        </div>
      </div>
    </div>

    <!-- 区域2: 图片上传 -->
    <div class="section" id="section-upload">
      <div class="section-title">图片上传</div>
      <div class="upload-row">
        <div class="upload-box disabled" id="upload-artwork" onclick="触发上传('artwork')">
          <input type="file" id="file-artwork" accept="image/*" onchange="处理上传(this, 'artwork')">
          <span class="plus">+</span>
          <span class="label">作品图片</span>
        </div>
        <div class="upload-box disabled" id="upload-space" onclick="触发上传('space')">
          <input type="file" id="file-space" accept="image/*" onchange="处理上传(this, 'space')">
          <span class="plus">+</span>
          <span class="label">空间图片</span>
        </div>
      </div>
    </div>

    <!-- 区域3: 接收方式 -->
    <div class="section" id="section-receive">
      <div class="section-title">接收方式</div>
      <div class="receive-row">
        <div class="receive-btn" data-method="email" onclick="选择接收方式(this)">邮箱</div>
        <div class="receive-btn" data-method="sms" onclick="选择接收方式(this)">短信</div>
        <div class="receive-input-wrap" id="receive-input-wrap">
          <input type="text" id="receive-target" placeholder="">
        </div>
      </div>
    </div>

    <!-- 区域4: 附加服务 -->
    <div class="section" id="section-extra">
      <div class="toggle-row">
        <div class="toggle-label">
          挂画后软装适配性微调
          <small>可选附加服务</small>
        </div>
        <div class="toggle-switch" id="extra-toggle" onclick="切换附加服务()"></div>
      </div>
    </div>

    <button class="submit-btn" id="submit-btn" disabled onclick="提交表单()">提交</button>

  </div>

  <script>
    /* ==========================================
       视差滚动效果 - 背景速度为内容的50%
       移动端优化：避免地址栏隐藏导致的背景抖动
       ========================================== */
    const parallaxBg = document.querySelector('.parallax-bg');
    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
    
    // 移动端使用固定高度，避免地址栏隐藏/显示导致的抖动
    if (isMobile) {
      // 移动端：使用视口高度的200%确保滚动时不露底
      const viewportHeight = window.innerHeight;
      parallaxBg.style.height = `${viewportHeight * 2}px`;
    } else {
      // PC端：动态计算背景高度
      function 更新背景高度() {
        const docHeight = document.documentElement.scrollHeight;
        parallaxBg.style.height = `${docHeight * 1.5}px`;
      }
      
      更新背景高度();
      
      // PC端防抖resize，避免频繁触发
      let resizeTimer;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(更新背景高度, 150);
      });
    }
    
    // 视差滚动：背景移动速度为滚动的50%
    let ticking = false;
    window.addEventListener('scroll', () => {
      if (!ticking) {
        window.requestAnimationFrame(() => {
          const scrollY = window.scrollY;
          // 背景向下移动速度为滚动的50%（同向，但慢50%）
          parallaxBg.style.transform = `translateY(${scrollY * 0.5}px)`;
          ticking = false;
        });
        ticking = true;
      }
    }, { passive: true });

    /* ==========================================
       Toast 通知系统
       ========================================== */
    function 显示Toast(message, icon = '✓') {
      const container = document.getElementById('toast-container');
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.innerHTML = `
        <span class="icon">${icon}</span>
        <span>${message}</span>
      `;
      container.appendChild(toast);
      
      // 3秒后淡出并移除
      setTimeout(() => {
        toast.classList.add('fade-out');
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    /* ==========================================
       鼠标跟踪悬停光晕（服务按钮）
       ========================================== */
    document.querySelectorAll('.service-btn').forEach(btn => {
      btn.addEventListener('mousemove', (e) => {
        const rect = btn.getBoundingClientRect();
        const x = ((e.clientX - rect.left) / rect.width) * 100;
        const y = ((e.clientY - rect.top) / rect.height) * 100;
        btn.style.setProperty('--mouse-x', `${x}%`);
        btn.style.setProperty('--mouse-y', `${y}%`);
      });
    });

    /* ==========================================
       状态管理
       ========================================== */
    const 状态 = {
      服务类型: null,
      接收方式: null,
      接收地址: '',
      附加服务: false,
      作品图文件: null,
      空间图文件: null,
      提交中: false,
      当前步骤: 1
    };

    /* ==========================================
       渐进式显示动画控制
       ========================================== */
    function 显示区域(sectionId, 回调) {
      const section = document.getElementById(sectionId);
      if (!section || section.classList.contains('visible')) {
        if (回调) 回调();
        return;
      }
      
      section.classList.add('visible');
      
      setTimeout(() => {
        const rect = section.getBoundingClientRect();
        const windowHeight = window.innerHeight;
        
        if (rect.bottom > windowHeight - 20) {
          section.scrollIntoView({ 
            behavior: 'smooth', 
            block: 'nearest' 
          });
        }
        
        if (回调) {
          setTimeout(回调, 300);
        }
      }, 50);
    }

    /* ==========================================
       服务类型选择
       ========================================== */
    function 选择服务(btn) {
      document.querySelectorAll('.service-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      状态.服务类型 = btn.dataset.type;
      状态.当前步骤 = 2;

      清除上传('artwork');
      清除上传('space');

      const artworkBox = document.getElementById('upload-artwork');
      const spaceBox = document.getElementById('upload-space');

      if (状态.服务类型 === 'hang_in_home') {
        artworkBox.classList.remove('disabled');
        spaceBox.classList.remove('disabled');
      } else if (状态.服务类型 === 'recommend_work') {
        artworkBox.classList.add('disabled');
        spaceBox.classList.remove('disabled');
      } else if (状态.服务类型 === 'recommend_space') {
        artworkBox.classList.remove('disabled');
        spaceBox.classList.add('disabled');
      }

      显示区域('section-upload');
      检查提交条件();
    }

    /* ==========================================
       图片上传处理
       ========================================== */
    function 触发上传(type) {
      const box = document.getElementById(`upload-${type}`);
      if (box.classList.contains('disabled') || box.classList.contains('has-image')) return;
      document.getElementById(`file-${type}`).click();
    }

    function 处理上传(input, type) {
      const file = input.files[0];
      if (!file) return;

      if (type === 'artwork') 状态.作品图文件 = file;
      else 状态.空间图文件 = file;

      const box = document.getElementById(`upload-${type}`);
      box.classList.add('has-image');

      const oldPreview = box.querySelector('img.preview');
      const oldRemove = box.querySelector('.remove-btn');
      if (oldPreview) oldPreview.remove();
      if (oldRemove) oldRemove.remove();

      const img = document.createElement('img');
      img.className = 'preview';
      img.src = URL.createObjectURL(file);
      box.appendChild(img);

      const removeBtn = document.createElement('div');
      removeBtn.className = 'remove-btn';
      removeBtn.textContent = '×';
      removeBtn.onclick = (e) => {
        e.stopPropagation();
        清除上传(type);
      };
      box.appendChild(removeBtn);

      检查上传完成();
    }

    function 清除上传(type) {
      if (type === 'artwork') 状态.作品图文件 = null;
      else 状态.空间图文件 = null;

      const box = document.getElementById(`upload-${type}`);
      box.classList.remove('has-image');
      const preview = box.querySelector('img.preview');
      const removeBtn = box.querySelector('.remove-btn');
      if (preview) preview.remove();
      if (removeBtn) removeBtn.remove();

      document.getElementById(`file-${type}`).value = '';
      检查提交条件();
    }

    function 检查上传完成() {
      let 上传完成 = false;
      
      if (状态.服务类型 === 'hang_in_home') {
        上传完成 = 状态.作品图文件 && 状态.空间图文件;
      } else if (状态.服务类型 === 'recommend_work') {
        上传完成 = 状态.空间图文件;
      } else if (状态.服务类型 === 'recommend_space') {
        上传完成 = 状态.作品图文件;
      }

      if (上传完成 && 状态.当前步骤 === 2) {
        状态.当前步骤 = 3;
        显示区域('section-receive');
      }
      
      检查提交条件();
    }

    /* ==========================================
       接收方式选择
       ========================================== */
    function 选择接收方式(btn) {
      const method = btn.dataset.method;
      const inputWrap = document.getElementById('receive-input-wrap');
      const input = document.getElementById('receive-target');

      document.querySelectorAll('.receive-btn').forEach(b => b.classList.remove('active'));

      if (状态.接收方式 === method) {
        状态.接收方式 = null;
        inputWrap.classList.remove('show');
        input.value = '';
        状态.接收地址 = '';
      } else {
        btn.classList.add('active');
        状态.接收方式 = method;
        inputWrap.classList.add('show');

        if (method === 'email') {
          input.type = 'email';
          input.placeholder = '请输入邮箱地址';
        } else {
          input.type = 'tel';
          input.placeholder = '请输入手机号';
        }

        input.value = '';
        状态.接收地址 = '';
        setTimeout(() => input.focus(), 400);
      }

      检查提交条件();
    }

    document.getElementById('receive-target').addEventListener('input', (e) => {
      状态.接收地址 = e.target.value.trim();
      检查接收完成();
    });

    function 检查接收完成() {
      if (状态.接收方式 && 状态.接收地址 && 状态.当前步骤 === 3) {
        状态.当前步骤 = 4;
        显示区域('section-extra', () => {
          document.getElementById('submit-btn').classList.add('visible');
        });
      }
      检查提交条件();
    }

    /* ==========================================
       附加服务开关
       ========================================== */
    function 切换附加服务() {
      状态.附加服务 = !状态.附加服务;
      document.getElementById('extra-toggle').classList.toggle('active', 状态.附加服务);
    }

    /* ==========================================
       提交条件检查
       ========================================== */
    function 检查提交条件() {
      let 可提交 = true;

      if (!状态.服务类型) 可提交 = false;
      if (!状态.接收方式 || !状态.接收地址) 可提交 = false;

      if (状态.服务类型 === 'hang_in_home') {
        if (!状态.作品图文件 || !状态.空间图文件) 可提交 = false;
      } else if (状态.服务类型 === 'recommend_work') {
        if (!状态.空间图文件) 可提交 = false;
      } else if (状态.服务类型 === 'recommend_space') {
        if (!状态.作品图文件) 可提交 = false;
      }

      document.getElementById('submit-btn').disabled = !可提交;
    }

    /* ==========================================
       提交表单
       ========================================== */
    async function 提交表单() {
      if (状态.提交中) return;
      状态.提交中 = true;

      const btn = document.getElementById('submit-btn');
      btn.innerHTML = '<span class="loading-spinner"></span>提交中...';
      btn.disabled = true;

      const formData = new FormData();
      formData.append('service_type', 状态.服务类型);
      formData.append('receive_method', 状态.接收方式);
      formData.append('receive_target', 状态.接收地址);
      formData.append('extra_service', 状态.附加服务 ? '1' : '0');

      if (状态.作品图文件) formData.append('artwork', 状态.作品图文件);
      if (状态.空间图文件) formData.append('space', 状态.空间图文件);

      try {
        const resp = await fetch('/api/client/submit', {
          method: 'POST',
          body: formData
        });
        const data = await resp.json();

        if (data.success) {
          const methodText = 状态.接收方式 === 'email' ? '邮箱' : '短信';
          显示Toast(`提交成功！处理完成后将通过${methodText}通知您`, '✓');
          
          // 2秒后重置表单
          setTimeout(() => {
            重置表单();
          }, 2000);
        } else {
          显示Toast(data.error || '提交失败，请重试', '✗');
        }
      } catch (err) {
        显示Toast('网络异常，请检查连接后重试', '✗');
        console.error(err);
      } finally {
        状态.提交中 = false;
        btn.textContent = '提交';
        检查提交条件();
      }
    }

    /* ==========================================
       重置表单
       ========================================== */
    function 重置表单() {
      状态.服务类型 = null;
      状态.接收方式 = null;
      状态.接收地址 = '';
      状态.附加服务 = false;
      状态.作品图文件 = null;
      状态.空间图文件 = null;
      状态.当前步骤 = 1;

      document.querySelectorAll('.service-btn').forEach(b => b.classList.remove('active'));
      清除上传('artwork');
      清除上传('space');
      document.getElementById('upload-artwork').classList.add('disabled');
      document.getElementById('upload-space').classList.add('disabled');
      document.querySelectorAll('.receive-btn').forEach(b => b.classList.remove('active'));
      document.getElementById('receive-input-wrap').classList.remove('show');
      document.getElementById('receive-target').value = '';
      document.getElementById('extra-toggle').classList.remove('active');
      
      document.querySelectorAll('.section').forEach((s, i) => {
        if (i > 0) s.classList.remove('visible');
      });
      document.getElementById('submit-btn').classList.remove('visible');
      document.getElementById('submit-btn').disabled = true;
      
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  </script>
</body>
</html>
