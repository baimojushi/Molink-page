<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Mo:link Design</title>
  <style>
    /* ==========================================
       Framer友好的调色板系统
       所有颜色和动画参数集中在此处，便于导入Framer后调整
       ========================================== */
    :root {
      /* 品牌色系 */
      --color-primary: #6b4c3b;
      --color-primary-light: #8b6f5e;
      --color-primary-pale: #f5efe9;
      --color-primary-dark: #4a3228;

      /* 强调色 */
      --color-accent: #7a9e7e;
      --color-accent-light: #a8c5ab;
      --color-accent-dark: #5a7e5e;

      /* 中性色 */
      --color-bg: #faf7f4;
      --color-card: #ffffff;
      --color-border: #e8e0d8;
      --color-text-primary: #3a2a1a;
      --color-text-secondary: #8a7a6a;
      --color-text-tertiary: #b8a898;
      --color-disabled-bg: #f0ebe5;
      --color-disabled-text: #c8b8a8;

      /* 圆角 */
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;

      /* 阴影 */
      --shadow-card: 0 2px 12px rgba(106, 76, 59, 0.08);
      --shadow-elevated: 0 8px 32px rgba(106, 76, 59, 0.15);

      /* 动画参数（Framer Motion 风格） */
      --duration-fast: 0.2s;
      --duration-normal: 0.3s;
      --duration-slow: 0.5s;
      --easing-standard: cubic-bezier(0.4, 0, 0.2, 1);
      --easing-enter: cubic-bezier(0, 0, 0.2, 1);
      --easing-exit: cubic-bezier(0.4, 0, 1, 1);

      /* 滑出动画距离 */
      --slide-distance: 40px;
    }

    /* ==========================================
       全局重置
       ========================================== */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      background: var(--color-bg);
      color: var(--color-text-primary);
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }

    /* ==========================================
       页面头部
       ========================================== */
    .header {
      background: var(--color-primary);
      color: #fff;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .header-logo {
      font-size: 20px;
      font-weight: 700;
      letter-spacing: 0.5px;
    }
    .header-sub {
      font-size: 12px;
      opacity: 0.7;
      margin-left: auto;
    }

    /* ==========================================
       主容器
       ========================================== */
    .container {
      max-width: 480px;
      margin: 0 auto;
      padding: 20px 16px 40px;
    }

    /* ==========================================
       分区卡片 + 滑出动画
       ========================================== */
    .section {
      background: var(--color-card);
      border-radius: var(--radius-lg);
      padding: 20px;
      margin-bottom: 16px;
      box-shadow: var(--shadow-card);
      border: 1px solid var(--color-border);
      
      /* 初始状态：隐藏在上方 */
      opacity: 0;
      transform: translateY(calc(-1 * var(--slide-distance)));
      max-height: 0;
      overflow: hidden;
      padding-top: 0;
      padding-bottom: 0;
      margin-bottom: 0;
      
      /* 动画过渡 */
      transition: 
        opacity var(--duration-slow) var(--easing-enter),
        transform var(--duration-slow) var(--easing-enter),
        max-height var(--duration-slow) var(--easing-enter),
        padding var(--duration-slow) var(--easing-enter),
        margin var(--duration-slow) var(--easing-enter);
    }
    
    /* 滑出显示状态 */
    .section.visible {
      opacity: 1;
      transform: translateY(0);
      max-height: 2000px;
      padding-top: 20px;
      padding-bottom: 20px;
      margin-bottom: 16px;
    }
    
    /* 第一个区域（服务类型）始终可见 */
    .section:first-of-type {
      opacity: 1;
      transform: translateY(0);
      max-height: none;
      padding: 20px;
      margin-bottom: 16px;
    }

    .section-title {
      font-size: 14px;
      color: var(--color-text-secondary);
      margin-bottom: 14px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .section-title::before {
      content: '';
      width: 3px;
      height: 14px;
      background: var(--color-primary);
      border-radius: 2px;
    }

    /* ==========================================
       服务类型选择按钮组
       ========================================== */
    .service-btns {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .service-btn {
      padding: 14px 16px;
      border: 2px solid var(--color-border);
      border-radius: var(--radius-md);
      background: var(--color-card);
      font-size: 15px;
      color: var(--color-text-primary);
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing-standard);
      text-align: left;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .service-btn:active { transform: scale(0.98); }
    .service-btn.active {
      border-color: var(--color-accent);
      background: linear-gradient(135deg, rgba(122,158,126,0.08), rgba(122,158,126,0.03));
      color: var(--color-accent-dark);
    }
    .service-btn .icon {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      flex-shrink: 0;
      font-weight: 600;
    }
    .service-btn.active .icon {
      background: var(--color-accent);
      color: #fff;
    }
    .service-btn:not(.active) .icon {
      background: var(--color-disabled-bg);
      color: var(--color-text-tertiary);
    }

    /* ==========================================
       图片上传区域
       ========================================== */
    .upload-row {
      display: flex;
      gap: 12px;
    }
    .upload-box {
      flex: 1;
      aspect-ratio: 1;
      border: 2px dashed var(--color-border);
      border-radius: var(--radius-md);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing-standard);
      position: relative;
      overflow: hidden;
      background: var(--color-primary-pale);
      
      /* 底图预留：取消注释并设置背景图 */
      /* background-image: url('/path/to/placeholder-artwork.png'); */
      background-size: cover;
      background-position: center;
    }
    .upload-box:active { transform: scale(0.97); }
    .upload-box.has-image {
      border-style: solid;
      border-color: var(--color-accent);
    }
    .upload-box.disabled {
      opacity: 0.35;
      pointer-events: none;
      background: var(--color-disabled-bg);
    }
    .upload-box .label {
      font-size: 13px;
      color: var(--color-text-secondary);
      margin-top: 8px;
      background: rgba(255,255,255,0.9);
      padding: 4px 10px;
      border-radius: 12px;
    }
    .upload-box .plus {
      font-size: 32px;
      color: var(--color-text-tertiary);
      line-height: 1;
      background: rgba(255,255,255,0.9);
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .upload-box img.preview {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .upload-box .remove-btn {
      position: absolute;
      top: 6px;
      right: 6px;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: rgba(0,0,0,0.5);
      color: #fff;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 5;
      cursor: pointer;
    }
    .upload-box input[type="file"] {
      display: none;
    }

    /* 底图样式（当需要显示占位图时） */
    .upload-box[data-placeholder="artwork"]::before {
      /* 可在此设置作品图占位背景 */
    }
    .upload-box[data-placeholder="space"]::before {
      /* 可在此设置空间图占位背景 */
    }

    /* ==========================================
       接收方式
       ========================================== */
    .receive-row {
      display: flex;
      gap: 10px;
      align-items: stretch;
    }
    .receive-btn {
      padding: 12px 18px;
      border: 2px solid var(--color-border);
      border-radius: var(--radius-md);
      background: var(--color-card);
      font-size: 14px;
      color: var(--color-text-primary);
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing-standard);
      white-space: nowrap;
    }
    .receive-btn.active {
      border-color: var(--color-accent);
      background: var(--color-accent);
      color: #fff;
    }
    .receive-input-wrap {
      flex: 1;
      overflow: hidden;
      max-width: 0;
      opacity: 0;
      transition: 
        max-width 0.4s var(--easing-standard), 
        opacity var(--duration-normal) ease, 
        margin var(--duration-normal) ease;
      margin-left: 0;
    }
    .receive-input-wrap.show {
      max-width: 300px;
      opacity: 1;
      margin-left: 10px;
    }
    .receive-input-wrap input {
      width: 100%;
      height: 100%;
      min-height: 44px;
      padding: 0 14px;
      border: 2px solid var(--color-border);
      border-radius: var(--radius-md);
      font-size: 14px;
      color: var(--color-text-primary);
      background: var(--color-card);
      outline: none;
      transition: border-color var(--duration-normal) var(--easing-standard);
    }
    .receive-input-wrap input:focus {
      border-color: var(--color-accent);
    }
    .receive-input-wrap input::placeholder {
      color: var(--color-text-tertiary);
    }

    /* ==========================================
       附加服务开关
       ========================================== */
    .toggle-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 4px 0;
    }
    .toggle-label {
      font-size: 14px;
      color: var(--color-text-primary);
      flex: 1;
      line-height: 1.4;
    }
    .toggle-label small {
      display: block;
      color: var(--color-text-secondary);
      font-size: 12px;
      margin-top: 2px;
    }
    .toggle-switch {
      width: 48px;
      height: 28px;
      background: var(--color-disabled-bg);
      border-radius: 14px;
      position: relative;
      cursor: pointer;
      transition: background var(--duration-normal) var(--easing-standard);
      flex-shrink: 0;
      margin-left: 12px;
    }
    .toggle-switch.active {
      background: var(--color-accent);
    }
    .toggle-switch::after {
      content: '';
      width: 22px;
      height: 22px;
      background: #fff;
      border-radius: 50%;
      position: absolute;
      top: 3px;
      left: 3px;
      transition: left var(--duration-normal) var(--easing-standard);
      box-shadow: 0 1px 4px rgba(0,0,0,0.15);
    }
    .toggle-switch.active::after {
      left: 23px;
    }

    /* ==========================================
       提交按钮
       ========================================== */
    .submit-btn {
      width: 100%;
      padding: 16px;
      border: none;
      border-radius: var(--radius-md);
      background: var(--color-primary);
      color: #fff;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing-standard);
      letter-spacing: 2px;
      
      /* 初始隐藏 */
      opacity: 0;
      transform: translateY(calc(-1 * var(--slide-distance)));
      pointer-events: none;
    }
    .submit-btn.visible {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }
    .submit-btn:active:not(:disabled) {
      transform: scale(0.98);
      background: var(--color-primary-dark);
    }
    .submit-btn:disabled {
      background: var(--color-disabled-bg);
      color: var(--color-disabled-text);
      cursor: not-allowed;
    }

    /* ==========================================
       成功提示遮罩
       ========================================== */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
      opacity: 0;
      pointer-events: none;
      transition: opacity var(--duration-normal) ease;
    }
    .overlay.show {
      opacity: 1;
      pointer-events: auto;
    }
    .success-card {
      background: var(--color-card);
      border-radius: var(--radius-lg);
      padding: 32px 28px;
      text-align: center;
      max-width: 320px;
      width: 90%;
      box-shadow: var(--shadow-elevated);
      transform: scale(0.9);
      transition: transform var(--duration-normal) ease;
    }
    .overlay.show .success-card {
      transform: scale(1);
    }
    .success-card .icon-big {
      font-size: 48px;
      margin-bottom: 16px;
    }
    .success-card h3 {
      font-size: 18px;
      margin-bottom: 8px;
      color: var(--color-text-primary);
    }
    .success-card p {
      font-size: 14px;
      color: var(--color-text-secondary);
      line-height: 1.6;
      margin-bottom: 20px;
    }
    .success-card button {
      padding: 12px 32px;
      border: none;
      border-radius: var(--radius-md);
      background: var(--color-primary);
      color: #fff;
      font-size: 15px;
      cursor: pointer;
      transition: background var(--duration-normal) var(--easing-standard);
    }

    /* ==========================================
       加载状态
       ========================================== */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255,255,255,0.3);
      border-top-color: #fff;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
      vertical-align: middle;
      margin-right: 8px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body>

  <div class="header">
    <div class="header-logo">Mo:link Design</div>
    <div class="header-sub">艺术空间匹配服务</div>
  </div>

  <div class="container">

    <!-- 区域1: 服务类型选择（始终可见） -->
    <div class="section" id="section-service">
      <div class="section-title">服务类型选择</div>
      <div class="service-btns">
        <div class="service-btn" data-type="hang_in_home" onclick="选择服务(this)">
          <div class="icon">A</div>
          <div>作品挂进家</div>
        </div>
        <div class="service-btn" data-type="recommend_work" onclick="选择服务(this)">
          <div class="icon">B</div>
          <div>根据空间推荐作品</div>
        </div>
        <div class="service-btn" data-type="recommend_space" onclick="选择服务(this)">
          <div class="icon">C</div>
          <div>根据作品推荐空间</div>
        </div>
      </div>
    </div>

    <!-- 区域2: 图片上传 -->
    <div class="section" id="section-upload">
      <div class="section-title">图片上传</div>
      <div class="upload-row">
        <div class="upload-box disabled" id="upload-artwork" data-placeholder="artwork" onclick="触发上传('artwork')">
          <input type="file" id="file-artwork" accept="image/*" onchange="处理上传(this, 'artwork')">
          <span class="plus">+</span>
          <span class="label">作品图片</span>
        </div>
        <div class="upload-box disabled" id="upload-space" data-placeholder="space" onclick="触发上传('space')">
          <input type="file" id="file-space" accept="image/*" onchange="处理上传(this, 'space')">
          <span class="plus">+</span>
          <span class="label">空间图片</span>
        </div>
      </div>
    </div>

    <!-- 区域3: 接收方式 -->
    <div class="section" id="section-receive">
      <div class="section-title">接收方式</div>
      <div class="receive-row">
        <div class="receive-btn" data-method="email" onclick="选择接收方式(this)">邮箱</div>
        <div class="receive-btn" data-method="sms" onclick="选择接收方式(this)">短信</div>
        <div class="receive-input-wrap" id="receive-input-wrap">
          <input type="text" id="receive-target" placeholder="">
        </div>
      </div>
    </div>

    <!-- 区域4+5: 附加服务和提交按钮（同时出现） -->
    <div class="section" id="section-extra">
      <div class="toggle-row">
        <div class="toggle-label">
          挂画后软装适配性微调
          <small>可选附加服务</small>
        </div>
        <div class="toggle-switch" id="extra-toggle" onclick="切换附加服务()"></div>
      </div>
    </div>

    <button class="submit-btn" id="submit-btn" disabled onclick="提交表单()">提交</button>

  </div>

  <div class="overlay" id="success-overlay">
    <div class="success-card">
      <div class="icon-big">✓</div>
      <h3>提交成功</h3>
      <p id="success-msg">处理完成后将通过邮箱通知您，请留意查收。</p>
      <button onclick="重置表单()">继续提交新服务</button>
    </div>
  </div>

  <script>
    /* ==========================================
       Framer友好的状态管理
       导入Framer后可直接绑定到组件状态
       ========================================== */
    const 状态 = {
      服务类型: null,
      接收方式: null,
      接收地址: '',
      附加服务: false,
      作品图文件: null,
      空间图文件: null,
      提交中: false,
      当前步骤: 1  // 1=选服务, 2=上传图, 3=选接收, 4=附加+提交
    };

    /* ==========================================
       渐进式显示动画控制
       ========================================== */
    function 显示区域(sectionId, 回调) {
      const section = document.getElementById(sectionId);
      if (!section || section.classList.contains('visible')) {
        if (回调) 回调();
        return;
      }
      
      section.classList.add('visible');
      
      // 等待动画开始后检查是否需要滚动
      setTimeout(() => {
        const rect = section.getBoundingClientRect();
        const windowHeight = window.innerHeight;
        
        // 如果元素底部超出视口，自动滚动到该元素
        if (rect.bottom > windowHeight - 20) {
          section.scrollIntoView({ 
            behavior: 'smooth', 
            block: 'nearest' 
          });
        }
        
        if (回调) {
          setTimeout(回调, 300);
        }
      }, 50);
    }

    /* ==========================================
       服务类型选择
       ========================================== */
    function 选择服务(btn) {
      document.querySelectorAll('.service-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      状态.服务类型 = btn.dataset.type;
      状态.当前步骤 = 2;

      清除上传('artwork');
      清除上传('space');

      const artworkBox = document.getElementById('upload-artwork');
      const spaceBox = document.getElementById('upload-space');

      if (状态.服务类型 === 'hang_in_home') {
        artworkBox.classList.remove('disabled');
        spaceBox.classList.remove('disabled');
      } else if (状态.服务类型 === 'recommend_work') {
        artworkBox.classList.add('disabled');
        spaceBox.classList.remove('disabled');
      } else if (状态.服务类型 === 'recommend_space') {
        artworkBox.classList.remove('disabled');
        spaceBox.classList.add('disabled');
      }

      显示区域('section-upload');
      检查提交条件();
    }

    /* ==========================================
       图片上传处理
       ========================================== */
    function 触发上传(type) {
      const box = document.getElementById(`upload-${type}`);
      if (box.classList.contains('disabled') || box.classList.contains('has-image')) return;
      document.getElementById(`file-${type}`).click();
    }

    function 处理上传(input, type) {
      const file = input.files[0];
      if (!file) return;

      if (type === 'artwork') 状态.作品图文件 = file;
      else 状态.空间图文件 = file;

      const box = document.getElementById(`upload-${type}`);
      box.classList.add('has-image');

      const oldPreview = box.querySelector('img.preview');
      const oldRemove = box.querySelector('.remove-btn');
      if (oldPreview) oldPreview.remove();
      if (oldRemove) oldRemove.remove();

      const img = document.createElement('img');
      img.className = 'preview';
      img.src = URL.createObjectURL(file);
      box.appendChild(img);

      const removeBtn = document.createElement('div');
      removeBtn.className = 'remove-btn';
      removeBtn.textContent = '×';
      removeBtn.onclick = (e) => {
        e.stopPropagation();
        清除上传(type);
      };
      box.appendChild(removeBtn);

      检查上传完成();
    }

    function 清除上传(type) {
      if (type === 'artwork') 状态.作品图文件 = null;
      else 状态.空间图文件 = null;

      const box = document.getElementById(`upload-${type}`);
      box.classList.remove('has-image');
      const preview = box.querySelector('img.preview');
      const removeBtn = box.querySelector('.remove-btn');
      if (preview) preview.remove();
      if (removeBtn) removeBtn.remove();

      document.getElementById(`file-${type}`).value = '';
      检查提交条件();
    }

    function 检查上传完成() {
      let 上传完成 = false;
      
      if (状态.服务类型 === 'hang_in_home') {
        上传完成 = 状态.作品图文件 && 状态.空间图文件;
      } else if (状态.服务类型 === 'recommend_work') {
        上传完成 = 状态.空间图文件;
      } else if (状态.服务类型 === 'recommend_space') {
        上传完成 = 状态.作品图文件;
      }

      if (上传完成 && 状态.当前步骤 === 2) {
        状态.当前步骤 = 3;
        显示区域('section-receive');
      }
      
      检查提交条件();
    }

    /* ==========================================
       接收方式选择
       ========================================== */
    function 选择接收方式(btn) {
      const method = btn.dataset.method;
      const inputWrap = document.getElementById('receive-input-wrap');
      const input = document.getElementById('receive-target');

      document.querySelectorAll('.receive-btn').forEach(b => b.classList.remove('active'));

      if (状态.接收方式 === method) {
        状态.接收方式 = null;
        inputWrap.classList.remove('show');
        input.value = '';
        状态.接收地址 = '';
      } else {
        btn.classList.add('active');
        状态.接收方式 = method;
        inputWrap.classList.add('show');

        if (method === 'email') {
          input.type = 'email';
          input.placeholder = '请输入邮箱地址';
        } else {
          input.type = 'tel';
          input.placeholder = '请输入手机号';
        }

        input.value = '';
        状态.接收地址 = '';
        setTimeout(() => input.focus(), 400);
      }

      检查提交条件();
    }

    document.getElementById('receive-target').addEventListener('input', (e) => {
      状态.接收地址 = e.target.value.trim();
      检查接收完成();
    });

    function 检查接收完成() {
      if (状态.接收方式 && 状态.接收地址 && 状态.当前步骤 === 3) {
        状态.当前步骤 = 4;
        显示区域('section-extra', () => {
          // 附加服务区显示后，同时显示提交按钮
          document.getElementById('submit-btn').classList.add('visible');
        });
      }
      检查提交条件();
    }

    /* ==========================================
       附加服务开关
       ========================================== */
    function 切换附加服务() {
      状态.附加服务 = !状态.附加服务;
      document.getElementById('extra-toggle').classList.toggle('active', 状态.附加服务);
    }

    /* ==========================================
       提交条件检查
       ========================================== */
    function 检查提交条件() {
      let 可提交 = true;

      if (!状态.服务类型) 可提交 = false;
      if (!状态.接收方式 || !状态.接收地址) 可提交 = false;

      if (状态.服务类型 === 'hang_in_home') {
        if (!状态.作品图文件 || !状态.空间图文件) 可提交 = false;
      } else if (状态.服务类型 === 'recommend_work') {
        if (!状态.空间图文件) 可提交 = false;
      } else if (状态.服务类型 === 'recommend_space') {
        if (!状态.作品图文件) 可提交 = false;
      }

      document.getElementById('submit-btn').disabled = !可提交;
    }

    /* ==========================================
       提交表单
       ========================================== */
    async function 提交表单() {
      if (状态.提交中) return;
      状态.提交中 = true;

      const btn = document.getElementById('submit-btn');
      btn.innerHTML = '<span class="loading-spinner"></span>提交中...';
      btn.disabled = true;

      const formData = new FormData();
      formData.append('service_type', 状态.服务类型);
      formData.append('receive_method', 状态.接收方式);
      formData.append('receive_target', 状态.接收地址);
      formData.append('extra_service', 状态.附加服务 ? '1' : '0');

      if (状态.作品图文件) formData.append('artwork', 状态.作品图文件);
      if (状态.空间图文件) formData.append('space', 状态.空间图文件);

      try {
        const resp = await fetch('/api/client/submit', {
          method: 'POST',
          body: formData
        });
        const data = await resp.json();

        if (data.success) {
          const methodText = 状态.接收方式 === 'email' ? '邮箱' : '短信';
          document.getElementById('success-msg').textContent =
            `处理完成后将通过${methodText}通知您，请留意查收。`;
          document.getElementById('success-overlay').classList.add('show');
        } else {
          alert(data.error || '提交失败，请重试');
        }
      } catch (err) {
        alert('网络异常，请检查连接后重试');
        console.error(err);
      } finally {
        状态.提交中 = false;
        btn.textContent = '提交';
        检查提交条件();
      }
    }

    /* ==========================================
       重置表单
       ========================================== */
    function 重置表单() {
      document.getElementById('success-overlay').classList.remove('show');

      状态.服务类型 = null;
      状态.接收方式 = null;
      状态.接收地址 = '';
      状态.附加服务 = false;
      状态.作品图文件 = null;
      状态.空间图文件 = null;
      状态.当前步骤 = 1;

      document.querySelectorAll('.service-btn').forEach(b => b.classList.remove('active'));
      清除上传('artwork');
      清除上传('space');
      document.getElementById('upload-artwork').classList.add('disabled');
      document.getElementById('upload-space').classList.add('disabled');
      document.querySelectorAll('.receive-btn').forEach(b => b.classList.remove('active'));
      document.getElementById('receive-input-wrap').classList.remove('show');
      document.getElementById('receive-target').value = '';
      document.getElementById('extra-toggle').classList.remove('active');
      
      // 隐藏所有后续区域
      document.querySelectorAll('.section').forEach((s, i) => {
        if (i > 0) s.classList.remove('visible');
      });
      document.getElementById('submit-btn').classList.remove('visible');
      document.getElementById('submit-btn').disabled = true;
      
      // 滚动回顶部
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  </script>
</body>
</html>
