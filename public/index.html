<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover, minimal-ui">
  <title>Mo:link Design</title>
  <style>
    /* ==========================================
       Glassmorphism + è§†å·®æ»šåŠ¨ + å¾®äº¤äº’
       ========================================== */
    :root {
      /* ğŸ¨ ç»ç’ƒé’è‰²è°ƒèŠ‚ï¼ˆ0-20 æ¨èï¼Œæ•°å€¼è¶Šå¤§é’è‰²è¶Šæ˜æ˜¾ï¼‰ */
      --glass-cyan-percent: 16;
      
      /* å“ç‰Œè‰²ç³» - æ¸…é€è½»ç›ˆ */
      --color-primary: #917355;
      --color-primary-light: #B5A091;
      --color-primary-pale: #F5F0EB;
      --color-primary-dark: #806A54;

      /* å¼ºè°ƒè‰² */
      --color-accent: #7a9e7e;
      --color-accent-light: #a8c5ab;
      --color-accent-dark: #5a7e5e;

      /* ç»ç’ƒæ€æ•ˆæœ */
      --glass-bg: hsla(180, calc(var(--glass-cyan-percent) * 1%), 98%, 0.25);
      --glass-border: hsla(180, calc(var(--glass-cyan-percent) * 0.8%), 95%, 0.5);
      --glass-shadow: 0 8px 32px rgba(31, 38, 135, 0.12);
      --glass-blur: 20px;

      /* ä¸­æ€§è‰² */
      --color-text-primary: #2a2a2a;
      --color-text-secondary: #5a5a5a;
      --color-text-tertiary: #8a8a8a;
      --color-disabled-bg: rgba(240, 235, 229, 0.5);
      --color-disabled-text: #c8b8a8;

      /* åœ†è§’ */
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;

      /* åŠ¨ç”»å‚æ•° */
      --duration-fast: 0.2s;
      --duration-normal: 0.3s;
      --duration-slow: 0.5s;
      --easing-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
      --easing-smooth: cubic-bezier(0.4, 0, 0.2, 1);
      --easing-enter: cubic-bezier(0, 0, 0.2, 1);

      /* æ»‘å‡ºåŠ¨ç”»è·ç¦» */
      --slide-distance: 40px;

      /* é¢æ¿å®½åº¦ */
      --panel-width: 480px;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    /* ==========================================
       ç§»åŠ¨ç«¯å…¨å±€ä¼˜åŒ– + Chromeç§»åŠ¨ç«¯ä¿®å¤
       ========================================== */
    html {
      touch-action: manipulation;
      -webkit-user-select: none;
      user-select: none;
      scroll-behavior: smooth;
      -webkit-text-size-adjust: 100%;
      text-size-adjust: 100%;
    }

    input, textarea, [contenteditable] {
      -webkit-user-select: text;
      user-select: text;
      touch-action: auto;
      font-size: max(16px, 1em);
    }

    * {
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
    }

    /* ==========================================
       è§†å·®èƒŒæ™¯å±‚
       ========================================== */
    body {
      font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      color: var(--color-text-primary);
      -webkit-font-smoothing: antialiased;
    }

    .parallax-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      min-height: 100%;
      z-index: 0;
      opacity: 1;
      will-change: transform;
      background: linear-gradient(135deg, #f5efe9 0%, #e8dfd5 100%);
      background-image: url('/images/background-mobile.jpg');
      background-size: cover;
      background-position: center top;
      background-repeat: no-repeat;
      background-attachment: scroll;
    }

    @media (min-width: 768px) {
      .parallax-bg {
        background-image: url('/images/background.jpg');
      }
    }

    .parallax-bg::after {
      content: '';
      position: absolute;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='3.5' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.08'/%3E%3C/svg%3E");
      opacity: 0.6;
      mix-blend-mode: overlay;
    }

    /* ==========================================
       é¡µé¢å¤´éƒ¨ - ç»ç’ƒæ€
       ========================================== */
    .header {
      position: sticky;
      top: 0;
      z-index: 100;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      backdrop-filter: blur(var(--glass-blur)) saturate(180%);
      background: var(--glass-bg);
      border-bottom: 1px solid var(--glass-border);
      box-shadow: var(--glass-shadow);
    }

    .header-logo {
      font-size: 20px;
      font-weight: 700;
      letter-spacing: 0.5px;
      color: var(--color-primary-dark);
      transition: transform var(--duration-fast) var(--easing-bounce);
      cursor: default;
    }
    .header-logo:hover { transform: scale(1.05); }

    .header-sub {
      font-size: 12px;
      opacity: 0.7;
      margin-left: auto;
      color: var(--color-text-secondary);
    }

    /* ==========================================
       åŒé¢æ¿å¤–å±‚åŒ…è£…å™¨ï¼ˆæ¡Œé¢ç«¯æ¨ªå‘å¸ƒå±€ï¼‰
       ========================================== */
    .panels-wrapper {
      position: relative;
      z-index: 1;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 20px;
      padding: 20px 16px 40px;
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @media (max-width: 767px) {
      .panels-wrapper {
        flex-direction: column;
        align-items: center;
        padding: 24px 20px 60px;
      }
    }

    /* ==========================================
       è¡¨å•ä¸»é¢æ¿
       ========================================== */
    .form-panel {
      width: 100%;
      max-width: var(--panel-width);
      flex-shrink: 0;
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @media (max-width: 767px) {
      .form-panel {
        max-width: 100%;
      }
    }

    /* ==========================================
       äº¤ä»˜ç»“æœé¢æ¿
       ========================================== */
    .delivery-panel {
      width: 100%;
      max-width: var(--panel-width);
      flex-shrink: 0;
      overflow: hidden;
      opacity: 0;
      transform: translateX(60px);
      max-width: 0;
      padding: 0;
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      pointer-events: none;
    }

    .delivery-panel.visible {
      opacity: 1;
      transform: translateX(0);
      max-width: var(--panel-width);
      pointer-events: auto;
    }

    @media (max-width: 767px) {
      .delivery-panel {
        transform: translateY(30px);
        max-width: 100%;
        max-height: 0;
      }
      .delivery-panel.visible {
        transform: translateY(0);
        max-width: 100%;
        max-height: 5000px;
      }
    }

    .delivery-card {
      backdrop-filter: blur(var(--glass-blur)) saturate(180%);
      background: var(--glass-bg);
      border-radius: var(--radius-xl);
      padding: 24px;
      border: 1px solid var(--glass-border);
      box-shadow: var(--glass-shadow);
      position: relative;
      overflow: visible;
      background-image: linear-gradient(
        135deg,
        hsla(180, calc(var(--glass-cyan-percent) * 2), 98%, 0.4) 0%,
        hsla(180, var(--glass-cyan-percent), 95%, 0.05) 50%,
        hsla(180, calc(var(--glass-cyan-percent) / 2), 96%, 0.15) 100%
      );
    }

    /* ç»ç’ƒé¡¶éƒ¨é«˜å…‰ */
    .delivery-card::after {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.8) 50%, transparent 100%);
      border-radius: var(--radius-xl) var(--radius-xl) 0 0;
      opacity: 0.6;
    }

    /* ç™½è‰²å™ªç‚¹çº¹ç† */
    .delivery-card::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: var(--radius-xl);
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='2.5' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E");
      pointer-events: none;
      mix-blend-mode: overlay;
    }

    @media (max-width: 767px) {
      .delivery-card {
        padding: 28px 20px;
      }
    }

    /* ==========================================
       Apple é£æ ¼åŠ è½½åŠ¨æ•ˆ
       ========================================== */
    .apple-spinner-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px 0 20px;
    }

    .apple-spinner {
      width: 40px;
      height: 40px;
      position: relative;
    }

    .apple-spinner .petal {
      position: absolute;
      width: 3px;
      height: 10px;
      left: 50%;
      top: 50%;
      margin-left: -1.5px;
      margin-top: -20px;
      border-radius: 2px;
      background: var(--color-text-tertiary);
      transform-origin: 50% 20px;
      animation: apple-fade 1s linear infinite;
    }

    @keyframes apple-fade {
      0% { opacity: 1; }
      100% { opacity: 0.15; }
    }

    .apple-spinner-text {
      margin-top: 20px;
      font-size: 15px;
      font-weight: 500;
      color: var(--color-text-secondary);
      text-align: center;
    }

    .delivery-hint {
      margin-top: 16px;
      padding: 12px 16px;
      font-size: 13px;
      color: var(--color-text-tertiary);
      text-align: center;
      line-height: 1.6;
      background: rgba(255,255,255,0.2);
      border-radius: var(--radius-md);
    }

    @media (max-width: 767px) {
      .delivery-hint {
        font-size: 13px;
        padding: 14px 18px;
      }
    }

    /* ==========================================
       äº¤ä»˜å›¾ç‰‡å±•ç¤º
       ========================================== */
    .delivery-images {
      display: flex;
      flex-direction: column;
      gap: 14px;
      margin-top: 16px;
    }

    .delivery-img-wrap {
      border-radius: var(--radius-md);
      overflow: hidden;
      border: 1px solid var(--glass-border);
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      background: rgba(255,255,255,0.3);
      transition: all var(--duration-normal) var(--easing-smooth);
    }

    @media (hover: hover) {
      .delivery-img-wrap:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 24px rgba(0,0,0,0.12);
      }
    }

    .delivery-img-wrap img {
      width: 100%;
      display: block;
      -webkit-touch-callout: default;
      -webkit-user-select: auto;
      user-select: auto;
    }

    .delivery-img-hint {
      padding: 6px 10px;
      font-size: 11px;
      color: var(--color-text-tertiary);
      text-align: center;
      background: rgba(255,255,255,0.5);
    }

    @media (max-width: 767px) {
      .delivery-img-hint {
        padding: 8px 12px;
        font-size: 12px;
      }
    }

    /* äº¤ä»˜å®Œæˆæ ‡é¢˜ */
    .delivery-done-title {
      text-align: center;
      margin-bottom: 16px;
    }

    .delivery-done-title .icon {
      font-size: 36px;
      display: inline-block;
      margin-bottom: 8px;
      animation: iconBounce 0.6s var(--easing-bounce);
    }

    .delivery-done-title h3 {
      font-size: 17px;
      color: var(--color-text-primary);
      font-weight: 600;
    }

    .delivery-done-title p {
      font-size: 13px;
      color: var(--color-text-secondary);
      margin-top: 4px;
    }

    @keyframes iconBounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }

    /* æ¸²æŸ“çš„æ–‡å­—å†…å®¹ */
    .delivery-text-content {
      margin-top: 14px;
      padding: 16px;
      font-size: 14px;
      line-height: 1.7;
      color: var(--color-text-primary);
      background: rgba(255,255,255,0.3);
      border-radius: var(--radius-md);
      border: 1px solid var(--glass-border);
      white-space: pre-wrap;
    }

    /* "æäº¤æ–°çš„ä¸šåŠ¡"æŒ‰é’® */
    .new-order-btn {
      width: 100%;
      padding: 16px;
      border: 1.5px solid rgba(159, 131, 112, 0.4);
      border-radius: var(--radius-md);
      background: transparent;
      backdrop-filter: blur(20px) saturate(150%);
      background-image: linear-gradient(
        135deg,
        rgba(155, 131, 112, 0.35) 0%,
        rgba(175, 160, 145, 0.25) 50%,
        rgba(155, 131, 112, 0.3) 100%
      );
      box-shadow:
        0 4px 16px rgba(155, 131, 112, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.5);
      color: var(--color-primary-dark);
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing-smooth);
      letter-spacing: 2px;
      position: relative;
      overflow: hidden;
      margin-top: 20px;
      opacity: 0;
      transform: translateY(20px);
      animation: slideUpFade 0.5s 0.3s var(--easing-enter) forwards;
    }

    @keyframes slideUpFade {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .new-order-btn::before {
      content: '';
      position: absolute;
      top: 0; left: -100%;
      width: 100%; height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      transition: left 0.5s ease;
    }

    @media (hover: hover) {
      .new-order-btn:hover::before { left: 100%; }
      .new-order-btn:hover {
        transform: translateY(-3px);
        box-shadow:
          0 8px 24px rgba(155, 131, 112, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.6);
      }
    }

    .new-order-btn:active {
      transform: scale(0.98);
    }

    @media (max-width: 767px) {
      .new-order-btn {
        padding: 18px;
        font-size: 17px;
        min-height: 56px;
      }
    }

    /* ==========================================
       åˆ†åŒºå¡ç‰‡ - Glassmorphism
       ========================================== */
    .section {
      backdrop-filter: blur(var(--glass-blur)) saturate(180%);
      background: var(--glass-bg);
      border-radius: var(--radius-xl);
      padding: 20px;
      margin-bottom: 16px;
      box-shadow: var(--glass-shadow);
      border: 1px solid var(--glass-border);
      position: relative;
      overflow: visible;
      background-image: linear-gradient(
        135deg,
        hsla(180, calc(var(--glass-cyan-percent) * 2), 98%, 0.4) 0%,
        hsla(180, var(--glass-cyan-percent), 95%, 0.05) 50%,
        hsla(180, calc(var(--glass-cyan-percent) / 2), 96%, 0.15) 100%
      );
      opacity: 0;
      transform: translateY(calc(-1 * var(--slide-distance)));
      max-height: 0;
      padding-top: 0;
      padding-bottom: 0;
      margin-bottom: 0;
      transition: 
        opacity var(--duration-slow) var(--easing-enter),
        transform var(--duration-slow) var(--easing-enter),
        max-height var(--duration-slow) var(--easing-enter),
        padding var(--duration-slow) var(--easing-enter),
        margin var(--duration-slow) var(--easing-enter);
    }

    .section::after {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.8) 50%, transparent 100%);
      border-radius: var(--radius-xl) var(--radius-xl) 0 0;
      opacity: 0.6;
    }
    
    @media (max-width: 767px) {
      .section {
        padding: 24px;
        margin-bottom: 20px;
        border-width: 1.5px;
      }
      .section.visible {
        padding-top: 24px;
        padding-bottom: 24px;
        margin-bottom: 20px;
      }
    }
    
    .section.visible {
      opacity: 1;
      transform: translateY(0);
      max-height: 2000px;
      padding-top: 20px;
      padding-bottom: 20px;
      margin-bottom: 16px;
      overflow: visible;
    }
    
    .section:first-of-type {
      opacity: 1;
      transform: translateY(0);
      max-height: none;
      padding: 20px;
      margin-bottom: 16px;
    }

    @media (max-width: 767px) {
      .section:first-of-type {
        padding: 24px;
        margin-bottom: 20px;
      }
    }

    .section::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: var(--radius-xl);
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='2.5' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E");
      pointer-events: none;
      mix-blend-mode: overlay;
    }

    .section-title {
      font-size: 14px;
      color: var(--color-text-secondary);
      margin-bottom: 14px;
      display: flex;
      align-items: center;
      gap: 6px;
      font-weight: 600;
    }
    .section-title::before {
      content: '';
      width: 3px;
      height: 14px;
      background: var(--color-primary);
      border-radius: 2px;
    }

    /* ==========================================
       æœåŠ¡ç±»å‹é€‰æ‹©æŒ‰é’®
       ========================================== */
    .service-btns {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    @media (max-width: 767px) {
      .service-btns { gap: 14px; }
    }

    .service-btn {
      padding: 14px 16px;
      border: 2px solid var(--glass-border);
      border-radius: var(--radius-md);
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(8px);
      font-size: 15px;
      color: var(--color-text-primary);
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing-smooth);
      text-align: left;
      display: flex;
      align-items: center;
      gap: 10px;
      position: relative;
      overflow: hidden;
    }

    @media (max-width: 767px) {
      .service-btn {
        padding: 16px 18px;
        min-height: 56px;
      }
    }
    
    .service-btn:active { 
      transform: scale(0.98);
      transition-duration: var(--duration-fast);
    }
    
    .service-btn::after {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(122,158,126,0.15), transparent 50%);
      opacity: 0;
      transition: opacity var(--duration-normal) var(--easing-smooth);
    }
    
    @media (hover: hover) {
      .service-btn:hover::after { opacity: 1; }
    }
    
    .service-btn.active {
      border-color: var(--color-accent);
      background: rgba(122,158,126,0.2);
      color: var(--color-accent-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(122,158,126,0.2);
    }

    @media (max-width: 767px) {
      .service-btn.active { transform: translateY(0); }
    }
    
    .service-btn .icon {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      flex-shrink: 0;
      font-weight: 600;
      transition: all var(--duration-normal) var(--easing-bounce);
    }

    @media (hover: hover) {
      .service-btn:hover .icon { transform: rotate(5deg) scale(1.1); }
    }

    .service-btn.active .icon {
      background: var(--color-accent);
      color: #fff;
    }
    .service-btn:not(.active) .icon {
      background: var(--color-disabled-bg);
      color: var(--color-text-tertiary);
    }

    /* ==========================================
       å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ
       ========================================== */
    .upload-row {
      display: flex;
      gap: 12px;
    }

    @media (max-width: 767px) {
      .upload-row { gap: 16px; }
    }

    .upload-box {
      flex: 1;
      aspect-ratio: 1;
      border: 2px dashed var(--glass-border);
      border-radius: var(--radius-md);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing-smooth);
      position: relative;
      overflow: hidden;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(8px);
    }

    @media (max-width: 767px) {
      .upload-box { border-width: 2.5px; }
    }
    
    @media (hover: hover) {
      .upload-box:hover:not(.disabled) {
        border-color: var(--color-accent);
        transform: translateY(-3px);
        box-shadow: 0 6px 16px rgba(122,158,126,0.15);
      }
    }
    
    .upload-box:active:not(.disabled) { 
      transform: translateY(-1px) scale(0.98); 
    }

    @media (max-width: 767px) {
      .upload-box:active:not(.disabled) {
        transform: scale(0.98);
        border-color: var(--color-accent);
      }
    }
    
    .upload-box.has-image {
      border-style: solid;
      border-color: var(--color-accent);
    }
    .upload-box.disabled {
      opacity: 0.35;
      pointer-events: none;
    }
    .upload-box .label {
      font-size: 13px;
      color: var(--color-text-secondary);
      margin-top: 8px;
      background: rgba(255,255,255,0.8);
      backdrop-filter: blur(4px);
      padding: 4px 10px;
      border-radius: 12px;
      transition: transform var(--duration-fast) var(--easing-bounce);
    }

    @media (hover: hover) {
      .upload-box:hover .label { transform: scale(1.05); }
    }
    
    .upload-box .plus {
      font-size: 32px;
      color: var(--color-text-tertiary);
      line-height: 1;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(4px);
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all var(--duration-normal) var(--easing-bounce);
    }

    @media (max-width: 767px) {
      .upload-box .plus { width: 56px; height: 56px; font-size: 36px; }
    }

    @media (hover: hover) {
      .upload-box:hover .plus { 
        transform: rotate(90deg) scale(1.1);
        background: rgba(122,158,126,0.3);
        color: var(--color-accent);
      }
    }
    
    .upload-box img.preview {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      animation: fadeIn 0.3s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    
    .upload-box .remove-btn {
      position: absolute;
      top: 6px; right: 6px;
      width: 24px; height: 24px;
      border-radius: 50%;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(4px);
      color: #fff;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 5;
      cursor: pointer;
      transition: all var(--duration-fast) var(--easing-bounce);
      opacity: 0;
    }

    @media (max-width: 767px) {
      .upload-box .remove-btn {
        opacity: 1;
        width: 32px; height: 32px;
        font-size: 18px;
        top: 8px; right: 8px;
      }
    }

    @media (hover: hover) {
      .upload-box:hover .remove-btn { opacity: 1; }
    }

    .remove-btn:hover { 
      transform: scale(1.15) rotate(90deg);
      background: rgba(196,92,74,0.9);
    }

    @media (max-width: 767px) {
      .remove-btn:active {
        transform: scale(0.9);
        background: rgba(196,92,74,0.9);
      }
    }
    
    .upload-box input[type="file"] { display: none; }

    /* ==========================================
       æ¥æ”¶é‚®ç®±åŒºåŸŸï¼ˆç®€åŒ–ä¸ºçº¯é‚®ç®±ï¼‰
       ========================================== */
    .email-input-area input {
      width: 100%;
      min-height: 44px;
      padding: 0 14px;
      border: 2px solid var(--glass-border);
      border-radius: var(--radius-md);
      font-size: 14px;
      color: var(--color-text-primary);
      background: rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(8px);
      outline: none;
      transition: all var(--duration-normal) var(--easing-smooth);
    }

    @media (max-width: 767px) {
      .email-input-area input {
        min-height: 50px;
        font-size: 15px;
        padding: 0 16px;
      }
    }

    .email-input-area input:focus {
      border-color: var(--color-accent);
      transform: scale(1.01);
    }

    @media (max-width: 767px) {
      .email-input-area input:focus { transform: scale(1); }
    }

    .email-input-area input::placeholder {
      color: var(--color-text-tertiary);
    }

    .email-hint {
      margin-top: 10px;
      font-size: 12px;
      color: var(--color-text-tertiary);
      line-height: 1.5;
    }

    @media (max-width: 767px) {
      .email-hint { font-size: 13px; }
    }

    .upload-description {
      margin-top: 16px;
      padding: 14px 18px;
      background: linear-gradient(135deg, rgba(155, 131, 112, 0.06) 0%, rgba(175, 160, 145, 0.04) 100%);
      border-left: 3px solid var(--color-primary);
      border-radius: 8px;
      font-size: 13px;
      color: var(--color-text-secondary);
      line-height: 1.6;
      opacity: 0;
      transform: translateY(-8px);
      transition: opacity 0.4s ease, transform 0.4s ease;
    }

    .upload-description.show {
      opacity: 1;
      transform: translateY(0);
    }

    @media (max-width: 767px) {
      .upload-description { 
        font-size: 14px;
        padding: 12px 16px;
      }
    }

    /* ==========================================
       é™„åŠ æœåŠ¡å¼€å…³
       ========================================== */
    .toggle-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 4px 0;
    }

    @media (max-width: 767px) {
      .toggle-row { padding: 8px 0; }
    }

    .toggle-label {
      font-size: 14px;
      color: var(--color-text-primary);
      flex: 1;
      line-height: 1.4;
    }

    @media (max-width: 767px) {
      .toggle-label { font-size: 15px; }
    }

    .toggle-label small {
      display: block;
      color: var(--color-text-secondary);
      font-size: 12px;
      margin-top: 2px;
    }

    @media (max-width: 767px) {
      .toggle-label small { font-size: 13px; }
    }

    .toggle-switch {
      width: 48px;
      height: 28px;
      background: rgba(200,184,168,0.3);
      backdrop-filter: blur(4px);
      border-radius: 14px;
      position: relative;
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing-smooth);
      flex-shrink: 0;
      margin-left: 12px;
    }

    @media (max-width: 767px) {
      .toggle-switch {
        width: 56px; height: 32px;
        border-radius: 16px;
        margin-left: 16px;
      }
    }

    @media (hover: hover) {
      .toggle-switch:hover { transform: scale(1.05); }
    }

    @media (max-width: 767px) {
      .toggle-switch:active { transform: scale(0.95); }
    }

    .toggle-switch.active { background: var(--color-accent); }
    .toggle-switch::after {
      content: '';
      width: 22px; height: 22px;
      background: #fff;
      border-radius: 50%;
      position: absolute;
      top: 3px; left: 3px;
      transition: left var(--duration-normal) var(--easing-bounce);
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    @media (max-width: 767px) {
      .toggle-switch::after { width: 26px; height: 26px; }
    }

    .toggle-switch.active::after { left: 23px; }

    @media (max-width: 767px) {
      .toggle-switch.active::after { left: 27px; }
    }

    /* ==========================================
       æäº¤æŒ‰é’® - è¤è‰²é«˜ç¡¼ç¡…ç»ç’ƒè´¨æ„Ÿ
       ========================================== */
    .submit-btn {
      width: 100%;
      padding: 16px;
      border: 1.5px solid rgba(159, 131, 112, 0.4);
      border-radius: var(--radius-md);
      background: transparent;
      backdrop-filter: blur(20px) saturate(150%);
      background-image: linear-gradient(
        135deg,
        rgba(155, 131, 112, 0.35) 0%,
        rgba(175, 160, 145, 0.25) 50%,
        rgba(155, 131, 112, 0.3) 100%
      );
      box-shadow: 
        0 4px 16px rgba(155, 131, 112, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.5);
      color: var(--color-primary-dark);
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing-smooth);
      letter-spacing: 2px;
      position: relative;
      overflow: hidden;
      opacity: 0;
      transform: translateY(calc(-1 * var(--slide-distance)));
      pointer-events: none;
    }

    @media (max-width: 767px) {
      .submit-btn {
        padding: 18px;
        font-size: 17px;
        min-height: 56px;
      }
    }

    .submit-btn.visible {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }
    
    .submit-btn::before {
      content: '';
      position: absolute;
      top: 0; left: -100%;
      width: 100%; height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      transition: left 0.5s ease;
    }

    @media (hover: hover) {
      .submit-btn:hover::before { left: 100%; }
      .submit-btn:hover:not(:disabled) {
        transform: translateY(-3px);
        box-shadow: 
          0 8px 24px rgba(155, 131, 112, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.6);
        border-color: rgba(175, 160, 145, 0.6);
        background-image: linear-gradient(
          135deg,
          rgba(155, 131, 112, 0.4) 0%,
          rgba(175, 160, 145, 0.3) 50%,
          rgba(155, 131, 112, 0.35) 100%
        );
      }
    }
    
    .submit-btn:active:not(:disabled) {
      transform: translateY(-1px) scale(0.98);
      background-image: linear-gradient(
        135deg,
        rgba(145, 121, 102, 0.4) 0%,
        rgba(165, 150, 135, 0.3) 50%,
        rgba(145, 121, 102, 0.35) 100%
      );
    }

    @media (max-width: 767px) {
      .submit-btn:active:not(:disabled) { transform: scale(0.98); }
    }

    .submit-btn:disabled {
      background: var(--color-disabled-bg);
      background-image: none;
      color: var(--color-disabled-text);
      cursor: not-allowed;
      border-color: transparent;
      box-shadow: none;
      backdrop-filter: none;
    }

    /* ==========================================
       Toast é€šçŸ¥ï¼ˆVercel é£æ ¼ï¼‰
       ========================================== */
    .toast-container {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 10px;
      pointer-events: none;
      width: max-content;
      max-width: 90vw;
    }

    @media (max-width: 767px) {
      .toast-container {
        top: auto;
        bottom: 100px;
      }
    }

    .toast {
      background: rgba(0, 0, 0, 0.92);
      color: #fff;
      padding: 14px 22px;
      border-radius: 12px;
      font-size: 14px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.25), 0 0 0 1px rgba(255,255,255,0.08);
      display: flex;
      align-items: center;
      gap: 10px;
      pointer-events: auto;
      animation: toastSlideIn 0.35s var(--easing-bounce);
      opacity: 1;
      transition: opacity 0.3s ease;
      backdrop-filter: blur(12px);
      cursor: pointer;
    }

    @media (max-width: 767px) {
      .toast {
        padding: 16px 24px;
        font-size: 15px;
        border-radius: 14px;
      }
    }

    .toast.fade-out { opacity: 0; }

    @keyframes toastSlideIn {
      from { opacity: 0; transform: translateY(-20px) scale(0.95); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    .toast .icon { font-size: 16px; flex-shrink: 0; }
    .toast .close-toast { margin-left: 8px; opacity: 0.5; font-size: 16px; flex-shrink: 0; cursor: pointer; }
    .toast .close-toast:hover { opacity: 1; }

    /* ==========================================
       åŠ è½½çŠ¶æ€
       ========================================== */
    .loading-spinner {
      display: inline-block;
      width: 20px; height: 20px;
      border: 2px solid rgba(255,255,255,0.3);
      border-top-color: #fff;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
      vertical-align: middle;
      margin-right: 8px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* ==========================================
       å›¾ç‰‡æ”¾å¤§é®ç½©
       ========================================== */
    .lightbox-overlay {
      position: fixed;
      inset: 0;
      z-index: 10000;
      background: rgba(0,0,0,0.85);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      cursor: pointer;
    }

    .lightbox-overlay.active {
      opacity: 1;
      pointer-events: auto;
    }

    .lightbox-overlay img {
      max-width: 92vw;
      max-height: 90vh;
      object-fit: contain;
      border-radius: 8px;
      transform: scale(0.9);
      transition: transform 0.3s var(--easing-bounce);
      -webkit-touch-callout: default;
      -webkit-user-select: auto;
      user-select: auto;
    }

    .lightbox-overlay.active img {
      transform: scale(1);
    }

    .lightbox-download-btn {
      position: absolute;
      bottom: 40px;
      padding: 12px 28px;
      background: var(--color-primary);
      color: #fff;
      border: none;
      border-radius: 24px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      transition: all 0.2s ease;
      z-index: 10001;
    }

    .lightbox-download-btn:hover {
      background: var(--color-primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 6px 24px rgba(0,0,0,0.4);
    }

    .lightbox-download-btn:active {
      transform: translateY(0);
    }
  </style>
</head>
<body>

  <!-- è§†å·®èƒŒæ™¯å±‚ -->
  <div class="parallax-bg"></div>

  <!-- Toast é€šçŸ¥å®¹å™¨ -->
  <div class="toast-container" id="toast-container"></div>

  <!-- å›¾ç‰‡æ”¾å¤§é®ç½© -->
  <div class="lightbox-overlay" id="lightbox" onclick="å…³é—­æ”¾å¤§()">
    <img id="lightbox-img" src="" alt="æ”¾å¤§æŸ¥çœ‹">
    <button class="lightbox-download-btn" onclick="event.stopPropagation(); ä¸‹è½½æ”¾å¤§å›¾ç‰‡()">â¬‡ ä¸‹è½½å›¾ç‰‡</button>
  </div>

  <div class="header">
    <div class="header-logo">Mo:link Design</div>
    <div class="header-sub">è‰ºæœ¯ç©ºé—´åŒ¹é…æœåŠ¡</div>
  </div>

  <div class="panels-wrapper" id="panels-wrapper">
    <!-- å·¦ä¾§ï¼šè¡¨å•é¢æ¿ -->
    <div class="form-panel" id="form-panel">

      <!-- åŒºåŸŸ1: æœåŠ¡ç±»å‹é€‰æ‹©ï¼ˆå§‹ç»ˆå¯è§ï¼‰ -->
      <div class="section" id="section-service">
        <div class="section-title">æœåŠ¡ç±»å‹é€‰æ‹©</div>
        <div class="service-btns">
          <div class="service-btn" data-type="hang_in_home" onclick="é€‰æ‹©æœåŠ¡(this)">
            <div class="icon">A</div>
            <div>ä½œå“æŒ‚è¿›å®¶</div>
          </div>
          <div class="service-btn" data-type="recommend_work" onclick="é€‰æ‹©æœåŠ¡(this)">
            <div class="icon">B</div>
            <div>æ ¹æ®ç©ºé—´æ¨èä½œå“</div>
          </div>
          <div class="service-btn" data-type="recommend_space" onclick="é€‰æ‹©æœåŠ¡(this)">
            <div class="icon">C</div>
            <div>æ ¹æ®ä½œå“æ¨èç©ºé—´</div>
          </div>
        </div>
      </div>

      <!-- åŒºåŸŸ2: å›¾ç‰‡ä¸Šä¼  -->
      <div class="section" id="section-upload">
        <div class="section-title">å›¾ç‰‡ä¸Šä¼ </div>
        <div class="upload-row">
          <div class="upload-box disabled" id="upload-artwork" onclick="è§¦å‘ä¸Šä¼ ('artwork')">
            <input type="file" id="file-artwork" accept="image/*" onchange="å¤„ç†ä¸Šä¼ (this, 'artwork')">
            <span class="plus">+</span>
            <span class="label">ä½œå“å›¾ç‰‡</span>
          </div>
          <div class="upload-box disabled" id="upload-space" onclick="è§¦å‘ä¸Šä¼ ('space')">
            <input type="file" id="file-space" accept="image/*" onchange="å¤„ç†ä¸Šä¼ (this, 'space')">
            <span class="plus">+</span>
            <span class="label">ç©ºé—´å›¾ç‰‡</span>
          </div>
        </div>
        <div class="upload-description" id="upload-description"></div>
      </div>

      <!-- åŒºåŸŸ3: æ¥æ”¶é‚®ç®± -->
      <div class="section" id="section-receive">
        <div class="section-title">æ¥æ”¶é‚®ç®±</div>
        <div class="email-input-area">
          <input type="email" id="receive-email" placeholder="è¯·è¾“å…¥é‚®ç®±åœ°å€">
          <div class="email-hint">å®Œæˆç”Ÿæˆåæˆ‘ä»¬å°†é€šè¿‡é‚®ç®±é€šçŸ¥æ‚¨</div>
        </div>
      </div>

      <!-- åŒºåŸŸ4: é™„åŠ æœåŠ¡ -->
      <div class="section" id="section-extra">
        <div class="toggle-row">
          <div class="toggle-label">
            æŒ‚ç”»åè½¯è£…é€‚é…æ€§å¾®è°ƒ
            <small>å¯é€‰é™„åŠ æœåŠ¡</small>
          </div>
          <div class="toggle-switch" id="extra-toggle" onclick="åˆ‡æ¢é™„åŠ æœåŠ¡()"></div>
        </div>
      </div>

      <button class="submit-btn" id="submit-btn" disabled onclick="æäº¤è¡¨å•()">æäº¤</button>

    </div>

    <!-- å³ä¾§ï¼šäº¤ä»˜ç»“æœé¢æ¿ -->
    <div class="delivery-panel" id="delivery-panel">
      <div class="delivery-card" id="delivery-card-content">
        <!-- åŠ¨æ€å¡«å…… -->
      </div>
    </div>
  </div>

  <script>
    /* ==========================================
       è®¾å¤‡ UUID ç®¡ç†
       ========================================== */
    function è·å–è®¾å¤‡UUID() {
      let uuid = localStorage.getItem('molink_device_uuid');
      if (!uuid) {
        uuid = ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
          (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
        );
        localStorage.setItem('molink_device_uuid', uuid);
      }
      return uuid;
    }

    const è®¾å¤‡UUID = è·å–è®¾å¤‡UUID();

    /* ==========================================
       è§†å·®æ»šåŠ¨æ•ˆæœ
       ========================================== */
    const parallaxBg = document.querySelector('.parallax-bg');
    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
    
    if (isMobile) {
      const viewportHeight = window.innerHeight;
      parallaxBg.style.height = `${viewportHeight * 2}px`;
    } else {
      function æ›´æ–°èƒŒæ™¯é«˜åº¦() {
        const docHeight = document.documentElement.scrollHeight;
        parallaxBg.style.height = `${docHeight * 1.5}px`;
      }
      æ›´æ–°èƒŒæ™¯é«˜åº¦();
      let resizeTimer;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(æ›´æ–°èƒŒæ™¯é«˜åº¦, 150);
      });
    }
    
    let ticking = false;
    let lastScrollY = 0;
    
    window.addEventListener('scroll', () => {
      lastScrollY = window.scrollY;
      if (!ticking) {
        window.requestAnimationFrame(() => {
          parallaxBg.style.transform = `translateY(${lastScrollY * 0.5}px)`;
          ticking = false;
        });
        ticking = true;
      }
    }, { passive: true });

    /* ==========================================
       Toast é€šçŸ¥ç³»ç»Ÿ
       ========================================== */
    function æ˜¾ç¤ºToast(message, icon = 'âœ“') {
      const container = document.getElementById('toast-container');
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.innerHTML = `<span class="icon">${icon}</span><span>${message}</span><span class="close-toast">âœ•</span>`;
      container.appendChild(toast);

      function dismiss() {
        if (toast.parentNode) {
          toast.classList.add('fade-out');
          setTimeout(() => toast.remove(), 300);
        }
      }

      toast.addEventListener('click', dismiss);
      setTimeout(dismiss, 20000);
    }

    /* ==========================================
       é¼ æ ‡è·Ÿè¸ªæ‚¬åœå…‰æ™•
       ========================================== */
    document.querySelectorAll('.service-btn').forEach(btn => {
      btn.addEventListener('mousemove', (e) => {
        const rect = btn.getBoundingClientRect();
        const x = ((e.clientX - rect.left) / rect.width) * 100;
        const y = ((e.clientY - rect.top) / rect.height) * 100;
        btn.style.setProperty('--mouse-x', `${x}%`);
        btn.style.setProperty('--mouse-y', `${y}%`);
      });
    });

    /* ==========================================
       çŠ¶æ€ç®¡ç†
       ========================================== */
    const çŠ¶æ€ = {
      æœåŠ¡ç±»å‹: null,
      æ¥æ”¶åœ°å€: '',
      é™„åŠ æœåŠ¡: false,
      ä½œå“å›¾æ–‡ä»¶: null,
      ç©ºé—´å›¾æ–‡ä»¶: null,
      æäº¤ä¸­: false,
      å½“å‰æ­¥éª¤: 1,
      å½“å‰è®¢å•ID: null,
      è½®è¯¢å®šæ—¶å™¨: null
    };

    /* ==========================================
       æ¸è¿›å¼æ˜¾ç¤ºåŠ¨ç”»æ§åˆ¶
       ========================================== */
    function æ˜¾ç¤ºåŒºåŸŸ(sectionId, å›è°ƒ) {
      const section = document.getElementById(sectionId);
      if (!section || section.classList.contains('visible')) {
        if (å›è°ƒ) å›è°ƒ();
        return;
      }
      section.classList.add('visible');
      setTimeout(() => {
        const rect = section.getBoundingClientRect();
        const windowHeight = window.innerHeight;
        if (rect.bottom > windowHeight - 20) {
          section.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        if (å›è°ƒ) setTimeout(å›è°ƒ, 300);
      }, 50);
    }

    /* ==========================================
       æœåŠ¡ç±»å‹é€‰æ‹©
       ========================================== */
    function é€‰æ‹©æœåŠ¡(btn) {
      document.querySelectorAll('.service-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      çŠ¶æ€.æœåŠ¡ç±»å‹ = btn.dataset.type;
      çŠ¶æ€.å½“å‰æ­¥éª¤ = 2;

      æ¸…é™¤ä¸Šä¼ ('artwork');
      æ¸…é™¤ä¸Šä¼ ('space');

      const artworkBox = document.getElementById('upload-artwork');
      const spaceBox = document.getElementById('upload-space');

      if (çŠ¶æ€.æœåŠ¡ç±»å‹ === 'hang_in_home') {
        artworkBox.classList.remove('disabled');
        spaceBox.classList.remove('disabled');
      } else if (çŠ¶æ€.æœåŠ¡ç±»å‹ === 'recommend_work') {
        artworkBox.classList.add('disabled');
        spaceBox.classList.remove('disabled');
      } else if (çŠ¶æ€.æœåŠ¡ç±»å‹ === 'recommend_space') {
        artworkBox.classList.remove('disabled');
        spaceBox.classList.add('disabled');
      }

      æ˜¾ç¤ºåŒºåŸŸ('section-upload');
      æ›´æ–°ä¸Šä¼ è¯´æ˜();
      æ£€æŸ¥æäº¤æ¡ä»¶();
    }

    /* æ›´æ–°ä¸Šä¼ è¯´æ˜æ–‡å­— */
    function æ›´æ–°ä¸Šä¼ è¯´æ˜() {
      const descBox = document.getElementById('upload-description');
      const è¯´æ˜æ–‡æœ¬ = {
        'hang_in_home': 'æˆ‘ä»¬å°†æŠŠæ‚¨ä¸Šä¼ çš„ä½œå“æŒ‚åœ¨ç©ºé—´å›¾ä¸­æœ€åˆé€‚çš„ä½ç½®ï¼Œå¹¶æ¨èä¸¤å¹…åŒæ‰¹å±•è§ˆä¸­ä¸æ‰€é€‰ä½œå“ç›¸è¿‘çš„ä½œå“ï¼Œå‘ˆç°æ‚¬æŒ‚æ•ˆæœã€‚',
        'recommend_work': 'æˆ‘ä»¬å°†åŸºäºä¸“ä¸šçš„ç©ºé—´å®¡ç¾ä¸ºæ‚¨ä¸Šä¼ çš„ç©ºé—´æ¨èä¸‰å¹…é€‚åˆçš„ä½œå“ï¼Œå¹¶å‘ˆç°æ‚¬æŒ‚æ•ˆæœã€‚',
        'recommend_space': 'æˆ‘ä»¬å°†ä¸ºæ‚¨æŒ‘é€‰çš„ä½œå“ç”Ÿæˆæœ€é€‚åˆå®ƒæ‚¬æŒ‚çš„ä¸‰ä»½å®¤å†…è®¾è®¡å‚è€ƒï¼Œå¹¶å‘ˆç°æ‚¬æŒ‚æ•ˆæœã€‚'
      };

      const text = è¯´æ˜æ–‡æœ¬[çŠ¶æ€.æœåŠ¡ç±»å‹];
      if (text) {
        descBox.textContent = text;
        descBox.classList.add('show');
      } else {
        descBox.classList.remove('show');
      }
    }

    /* ==========================================
       å›¾ç‰‡ä¸Šä¼ å¤„ç†
       ========================================== */
    function è§¦å‘ä¸Šä¼ (type) {
      const box = document.getElementById(`upload-${type}`);
      if (box.classList.contains('disabled') || box.classList.contains('has-image')) return;
      document.getElementById(`file-${type}`).click();
    }

    function å¤„ç†ä¸Šä¼ (input, type) {
      const file = input.files[0];
      if (!file) return;

      if (type === 'artwork') çŠ¶æ€.ä½œå“å›¾æ–‡ä»¶ = file;
      else çŠ¶æ€.ç©ºé—´å›¾æ–‡ä»¶ = file;

      const box = document.getElementById(`upload-${type}`);
      box.classList.add('has-image');

      const oldPreview = box.querySelector('img.preview');
      const oldRemove = box.querySelector('.remove-btn');
      if (oldPreview) oldPreview.remove();
      if (oldRemove) oldRemove.remove();

      const img = document.createElement('img');
      img.className = 'preview';
      img.src = URL.createObjectURL(file);
      box.appendChild(img);

      const removeBtn = document.createElement('div');
      removeBtn.className = 'remove-btn';
      removeBtn.textContent = 'Ã—';
      removeBtn.onclick = (e) => {
        e.stopPropagation();
        æ¸…é™¤ä¸Šä¼ (type);
      };
      box.appendChild(removeBtn);

      æ£€æŸ¥ä¸Šä¼ å®Œæˆ();
    }

    function æ¸…é™¤ä¸Šä¼ (type) {
      if (type === 'artwork') çŠ¶æ€.ä½œå“å›¾æ–‡ä»¶ = null;
      else çŠ¶æ€.ç©ºé—´å›¾æ–‡ä»¶ = null;

      const box = document.getElementById(`upload-${type}`);
      box.classList.remove('has-image');
      const preview = box.querySelector('img.preview');
      const removeBtn = box.querySelector('.remove-btn');
      if (preview) preview.remove();
      if (removeBtn) removeBtn.remove();

      document.getElementById(`file-${type}`).value = '';
      æ£€æŸ¥æäº¤æ¡ä»¶();
    }

    function æ£€æŸ¥ä¸Šä¼ å®Œæˆ() {
      let ä¸Šä¼ å®Œæˆ = false;
      
      if (çŠ¶æ€.æœåŠ¡ç±»å‹ === 'hang_in_home') {
        ä¸Šä¼ å®Œæˆ = çŠ¶æ€.ä½œå“å›¾æ–‡ä»¶ && çŠ¶æ€.ç©ºé—´å›¾æ–‡ä»¶;
      } else if (çŠ¶æ€.æœåŠ¡ç±»å‹ === 'recommend_work') {
        ä¸Šä¼ å®Œæˆ = çŠ¶æ€.ç©ºé—´å›¾æ–‡ä»¶;
      } else if (çŠ¶æ€.æœåŠ¡ç±»å‹ === 'recommend_space') {
        ä¸Šä¼ å®Œæˆ = çŠ¶æ€.ä½œå“å›¾æ–‡ä»¶;
      }

      if (ä¸Šä¼ å®Œæˆ && çŠ¶æ€.å½“å‰æ­¥éª¤ === 2) {
        çŠ¶æ€.å½“å‰æ­¥éª¤ = 3;
        æ˜¾ç¤ºåŒºåŸŸ('section-receive', () => {
          document.getElementById('receive-email').focus();
        });
      }
      
      æ£€æŸ¥æäº¤æ¡ä»¶();
    }

    /* ==========================================
       é‚®ç®±è¾“å…¥ç›‘å¬
       ========================================== */
    document.getElementById('receive-email').addEventListener('input', (e) => {
      çŠ¶æ€.æ¥æ”¶åœ°å€ = e.target.value.trim();
      æ£€æŸ¥é‚®ç®±å®Œæˆ();
    });

    function æ£€æŸ¥é‚®ç®±å®Œæˆ() {
      if (çŠ¶æ€.æ¥æ”¶åœ°å€ && çŠ¶æ€.å½“å‰æ­¥éª¤ === 3) {
        çŠ¶æ€.å½“å‰æ­¥éª¤ = 4;
        æ˜¾ç¤ºåŒºåŸŸ('section-extra', () => {
          document.getElementById('submit-btn').classList.add('visible');
        });
      }
      æ£€æŸ¥æäº¤æ¡ä»¶();
    }

    /* ==========================================
       é™„åŠ æœåŠ¡å¼€å…³
       ========================================== */
    function åˆ‡æ¢é™„åŠ æœåŠ¡() {
      çŠ¶æ€.é™„åŠ æœåŠ¡ = !çŠ¶æ€.é™„åŠ æœåŠ¡;
      document.getElementById('extra-toggle').classList.toggle('active', çŠ¶æ€.é™„åŠ æœåŠ¡);
    }

    /* ==========================================
       æäº¤æ¡ä»¶æ£€æŸ¥
       ========================================== */
    function æ£€æŸ¥æäº¤æ¡ä»¶() {
      let å¯æäº¤ = true;

      if (!çŠ¶æ€.æœåŠ¡ç±»å‹) å¯æäº¤ = false;
      if (!çŠ¶æ€.æ¥æ”¶åœ°å€) å¯æäº¤ = false;

      if (çŠ¶æ€.æœåŠ¡ç±»å‹ === 'hang_in_home') {
        if (!çŠ¶æ€.ä½œå“å›¾æ–‡ä»¶ || !çŠ¶æ€.ç©ºé—´å›¾æ–‡ä»¶) å¯æäº¤ = false;
      } else if (çŠ¶æ€.æœåŠ¡ç±»å‹ === 'recommend_work') {
        if (!çŠ¶æ€.ç©ºé—´å›¾æ–‡ä»¶) å¯æäº¤ = false;
      } else if (çŠ¶æ€.æœåŠ¡ç±»å‹ === 'recommend_space') {
        if (!çŠ¶æ€.ä½œå“å›¾æ–‡ä»¶) å¯æäº¤ = false;
      }

      document.getElementById('submit-btn').disabled = !å¯æäº¤;
    }

    /* ==========================================
       Apple é£æ ¼æ—‹è½¬åŠ è½½å™¨
       ========================================== */
    function åˆ›å»ºAppleåŠ è½½å™¨() {
      let petals = '';
      for (let i = 0; i < 12; i++) {
        const rotation = i * 30;
        const delay = -(1 - i / 12);
        petals += `<div class="petal" style="transform: rotate(${rotation}deg); animation-delay: ${delay}s;"></div>`;
      }
      return `<div class="apple-spinner">${petals}</div>`;
    }

    /* ==========================================
       æ˜¾ç¤ºäº¤ä»˜é¢æ¿
       ========================================== */
    function æ˜¾ç¤ºäº¤ä»˜é¢æ¿(å†…å®¹HTML) {
      const panel = document.getElementById('delivery-panel');
      const cardContent = document.getElementById('delivery-card-content');
      cardContent.innerHTML = å†…å®¹HTML;
      panel.classList.add('visible');
      
      // æ¡Œé¢ç«¯æ›´æ–°èƒŒæ™¯é«˜åº¦
      if (!isMobile) {
        setTimeout(() => {
          if (typeof æ›´æ–°èƒŒæ™¯é«˜åº¦ === 'function') æ›´æ–°èƒŒæ™¯é«˜åº¦();
        }, 700);
      }
    }

    /* æ˜¾ç¤ºç­‰å¾…çŠ¶æ€ */
    function æ˜¾ç¤ºç­‰å¾…çŠ¶æ€(serviceLabel) {
      const html = `
        <div class="apple-spinner-container">
          ${åˆ›å»ºAppleåŠ è½½å™¨()}
          <div class="apple-spinner-text">${serviceLabel || 'å¤„ç†ä¸­'}</div>
        </div>
        <div class="delivery-hint">
          æ‚¨å¯ä»¥é€€å‡ºå½“å‰é¡µé¢ï¼Œç‚¹å‡»é‚®ç®±é“¾æ¥æˆ–é‡æ–°æ‰«ç å³å¯æŸ¥çœ‹ç”Ÿæˆç»“æœã€‚<br>
          æ‚¨å¯ä»¥åœ¨æœ¬ç•Œé¢ç­‰å¾…æˆ–åˆ·æ–°ä»¥æäº¤æ–°çš„ä¸šåŠ¡è¯·æ±‚ï¼Œå¹¶ç‚¹å‡»æŸ¥çœ‹å†å²è®°å½•æµè§ˆæ‰€æœ‰çš„å·²ç”Ÿæˆå†…å®¹ã€‚
        </div>
      `;
      æ˜¾ç¤ºäº¤ä»˜é¢æ¿(html);
    }

    /* æ˜¾ç¤ºäº¤ä»˜ç»“æœ */
    function æ˜¾ç¤ºäº¤ä»˜ç»“æœ(data) {
      let imagesHtml = '';
      const images = data.images || data.Images || [];
      if (images.length > 0) {
        imagesHtml = `<div class="delivery-images">
          ${images.map((img, i) => `
            <div class="delivery-img-wrap" onclick="æ”¾å¤§å›¾ç‰‡('/deliveries/${img}')">
              <img src="/deliveries/${img}" alt="äº¤ä»˜å›¾ç‰‡" ${i === 0 ? 'onload="æ ‡è®°å·²æŸ¥æ”¶()"' : ''} oncontextmenu="æ ‡è®°å·²ä¸‹è½½()">
              <div class="delivery-img-hint">é•¿æŒ‰ä¿å­˜ Â· ç‚¹å‡»æ”¾å¤§</div>
            </div>
          `).join('')}
        </div>`;
      }

      const textContent = data.text || data.Text || '';
      let textHtml = '';
      if (textContent.trim()) {
        textHtml = `<div class="delivery-text-content">${textContent}</div>`;
      }

      // è·å–å†å²è®°å½•é“¾æ¥
      const deliveryToken = localStorage.getItem('molink_active_order') ? JSON.parse(localStorage.getItem('molink_active_order')).deliveryToken : null;

      const html = `
        <div class="delivery-done-title">
          <div class="icon">âœ“</div>
          <h3>å·²å®Œæˆ</h3>
          <p>${data.serviceTypeLabel || data.service_type_label || ''}</p>
        </div>
        ${imagesHtml}
        ${textHtml}
        <button class="new-order-btn" onclick="æäº¤æ–°ä¸šåŠ¡()">æäº¤æ–°çš„ä¸šåŠ¡</button>
        ${deliveryToken ? `<button class="new-order-btn" style="margin-top:12px; background-image:linear-gradient(135deg, rgba(122,158,126,0.35) 0%, rgba(142,178,146,0.25) 50%, rgba(122,158,126,0.3) 100%); border-color:rgba(122,158,126,0.4);" onclick="window.location.href='/d/${deliveryToken}'">æŸ¥çœ‹å†å²è®°å½•</button>` : ''}
      `;
      æ˜¾ç¤ºäº¤ä»˜é¢æ¿(html);
    }

    /* ==========================================
       å›¾ç‰‡æ”¾å¤§
       ========================================== */
    function æ”¾å¤§å›¾ç‰‡(src) {
      const overlay = document.getElementById('lightbox');
      const img = document.getElementById('lightbox-img');
      img.src = src;
      overlay.classList.add('active');
    }

    function å…³é—­æ”¾å¤§() {
      document.getElementById('lightbox').classList.remove('active');
    }

    function ä¸‹è½½æ”¾å¤§å›¾ç‰‡() {
      const imgSrc = document.getElementById('lightbox-img').src;
      if (!imgSrc) return;
      
      // åˆ›å»ºä¸´æ—¶é“¾æ¥ä¸‹è½½
      const a = document.createElement('a');
      a.href = imgSrc;
      a.download = imgSrc.split('/').pop() || 'molink-image.jpg';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      
      // æ ‡è®°å·²ä¸‹è½½
      æ ‡è®°å·²ä¸‹è½½();
    }

    /* æ ‡è®°å·²æŸ¥æ”¶ï¼ˆå›¾ç‰‡åŠ è½½æ—¶è§¦å‘ï¼Œä»…è°ƒç”¨ä¸€æ¬¡ï¼‰ */
    let å·²æ ‡è®°æŸ¥æ”¶ = false;
    function æ ‡è®°å·²æŸ¥æ”¶() {
      if (å·²æ ‡è®°æŸ¥æ”¶) return;
      if (çŠ¶æ€.å½“å‰è®¢å•ID) {
        å·²æ ‡è®°æŸ¥æ”¶ = true;
        fetch(`/api/client/mark-viewed/${çŠ¶æ€.å½“å‰è®¢å•ID}`, { method: 'POST' }).catch(() => {});
      }
    }

    /* æ ‡è®°å·²ä¸‹è½½ï¼ˆé•¿æŒ‰ä¿å­˜è§¦å‘ï¼Œä»…è°ƒç”¨ä¸€æ¬¡ï¼‰ */
    let å·²æ ‡è®°ä¸‹è½½ = false;
    function æ ‡è®°å·²ä¸‹è½½() {
      if (å·²æ ‡è®°ä¸‹è½½) return;
      if (çŠ¶æ€.å½“å‰è®¢å•ID) {
        å·²æ ‡è®°ä¸‹è½½ = true;
        fetch(`/api/client/mark-downloaded/${çŠ¶æ€.å½“å‰è®¢å•ID}`, { method: 'POST' }).catch(() => {});
      }
    }

    /* ==========================================
       æäº¤è¡¨å•
       ========================================== */
    async function æäº¤è¡¨å•() {
      if (çŠ¶æ€.æäº¤ä¸­) return;
      çŠ¶æ€.æäº¤ä¸­ = true;

      const btn = document.getElementById('submit-btn');
      btn.innerHTML = '<span class="loading-spinner"></span>æäº¤ä¸­...';
      btn.disabled = true;

      const formData = new FormData();
      formData.append('service_type', çŠ¶æ€.æœåŠ¡ç±»å‹);
      formData.append('receive_target', çŠ¶æ€.æ¥æ”¶åœ°å€);
      formData.append('extra_service', çŠ¶æ€.é™„åŠ æœåŠ¡ ? '1' : '0');
      formData.append('device_uuid', è®¾å¤‡UUID);

      if (çŠ¶æ€.ä½œå“å›¾æ–‡ä»¶) formData.append('artwork', çŠ¶æ€.ä½œå“å›¾æ–‡ä»¶);
      if (çŠ¶æ€.ç©ºé—´å›¾æ–‡ä»¶) formData.append('space', çŠ¶æ€.ç©ºé—´å›¾æ–‡ä»¶);

      try {
        const resp = await fetch('/api/client/submit', {
          method: 'POST',
          body: formData
        });
        const data = await resp.json();

        if (data.success) {
          æ˜¾ç¤ºToast('æäº¤æˆåŠŸï¼å¤„ç†å®Œæˆåå°†é€šè¿‡é‚®ç®±é€šçŸ¥æ‚¨', 'âœ“');
          çŠ¶æ€.å½“å‰è®¢å•ID = data.orderId;
          
          // ç¼“å­˜å½“å‰è®¢å•ä¿¡æ¯
          localStorage.setItem('molink_active_order', JSON.stringify({
            orderId: data.orderId,
            deliveryToken: data.deliveryToken,
            status: 'pending'
          }));

          // æ˜¾ç¤ºç­‰å¾…é¢æ¿
          æ˜¾ç¤ºç­‰å¾…çŠ¶æ€('æ­£åœ¨ä¸ºæ‚¨ç”Ÿæˆ...');

          // å¼€å§‹è½®è¯¢
          å¼€å§‹è½®è¯¢(data.orderId);
        } else {
          æ˜¾ç¤ºToast(data.error || 'æäº¤å¤±è´¥ï¼Œè¯·é‡è¯•', 'âœ—');
        }
      } catch (err) {
        æ˜¾ç¤ºToast('ç½‘ç»œå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥è¿æ¥åé‡è¯•', 'âœ—');
        console.error(err);
      } finally {
        çŠ¶æ€.æäº¤ä¸­ = false;
        btn.textContent = 'æäº¤';
        æ£€æŸ¥æäº¤æ¡ä»¶();
      }
    }

    /* ==========================================
       è½®è¯¢è®¢å•çŠ¶æ€
       ========================================== */
    function å¼€å§‹è½®è¯¢(orderId) {
      if (çŠ¶æ€.è½®è¯¢å®šæ—¶å™¨) clearInterval(çŠ¶æ€.è½®è¯¢å®šæ—¶å™¨);

      çŠ¶æ€.è½®è¯¢å®šæ—¶å™¨ = setInterval(async () => {
        try {
          const resp = await fetch(`/api/client/order-status/${orderId}`);
          const data = await resp.json();

          if (data.status === 'delivered') {
            clearInterval(çŠ¶æ€.è½®è¯¢å®šæ—¶å™¨);
            çŠ¶æ€.è½®è¯¢å®šæ—¶å™¨ = null;

            // æ›´æ–°ç¼“å­˜
            localStorage.setItem('molink_active_order', JSON.stringify({
              orderId: orderId,
              status: 'delivered'
            }));

            æ˜¾ç¤ºäº¤ä»˜ç»“æœ(data);
          }
        } catch (e) {
          console.error('è½®è¯¢å¼‚å¸¸:', e);
        }
      }, 8000); // æ¯8ç§’è½®è¯¢ä¸€æ¬¡
    }

    /* ==========================================
       æäº¤æ–°ä¸šåŠ¡ï¼ˆé‡ç½®ï¼‰
       ========================================== */
    function æäº¤æ–°ä¸šåŠ¡() {
      // æ¸…é™¤ç¼“å­˜
      localStorage.removeItem('molink_active_order');
      
      // éšè—äº¤ä»˜é¢æ¿
      document.getElementById('delivery-panel').classList.remove('visible');

      // æ¸…é™¤è½®è¯¢
      if (çŠ¶æ€.è½®è¯¢å®šæ—¶å™¨) {
        clearInterval(çŠ¶æ€.è½®è¯¢å®šæ—¶å™¨);
        çŠ¶æ€.è½®è¯¢å®šæ—¶å™¨ = null;
      }

      // é‡ç½®è¡¨å•
      é‡ç½®è¡¨å•();
    }

    /* ==========================================
       é‡ç½®è¡¨å•
       ========================================== */
    function é‡ç½®è¡¨å•() {
      çŠ¶æ€.æœåŠ¡ç±»å‹ = null;
      çŠ¶æ€.æ¥æ”¶åœ°å€ = '';
      çŠ¶æ€.é™„åŠ æœåŠ¡ = false;
      çŠ¶æ€.ä½œå“å›¾æ–‡ä»¶ = null;
      çŠ¶æ€.ç©ºé—´å›¾æ–‡ä»¶ = null;
      çŠ¶æ€.å½“å‰æ­¥éª¤ = 1;
      çŠ¶æ€.å½“å‰è®¢å•ID = null;

      document.querySelectorAll('.service-btn').forEach(b => b.classList.remove('active'));
      æ¸…é™¤ä¸Šä¼ ('artwork');
      æ¸…é™¤ä¸Šä¼ ('space');
      document.getElementById('upload-artwork').classList.add('disabled');
      document.getElementById('upload-space').classList.add('disabled');
      document.getElementById('receive-email').value = '';
      document.getElementById('extra-toggle').classList.remove('active');
      
      document.querySelectorAll('.section').forEach((s, i) => {
        if (i > 0) s.classList.remove('visible');
      });
      document.getElementById('submit-btn').classList.remove('visible');
      document.getElementById('submit-btn').disabled = true;
      
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    /* ==========================================
       é¡µé¢åˆå§‹åŒ–ï¼šæ£€æŸ¥è®¾å¤‡æ˜¯å¦æœ‰æ´»è·ƒè®¢å•
       ========================================== */
    async function åˆå§‹åŒ–é¡µé¢() {
      try {
        const resp = await fetch(`/api/client/device-status/${è®¾å¤‡UUID}`);
        const data = await resp.json();

        if (data.hasActiveOrder) {
          if (data.status === 'pending' || data.status === 'processing') {
            çŠ¶æ€.å½“å‰è®¢å•ID = data.orderId;
            æ˜¾ç¤ºç­‰å¾…çŠ¶æ€(data.serviceTypeLabel || 'æ­£åœ¨ä¸ºæ‚¨ç”Ÿæˆ...');
            å¼€å§‹è½®è¯¢(data.orderId);
          } else if (data.status === 'delivered') {
            æ˜¾ç¤ºäº¤ä»˜ç»“æœ(data);
          }
        }
      } catch (e) {
        console.error('åˆå§‹åŒ–æ£€æŸ¥è®¾å¤‡çŠ¶æ€å¤±è´¥:', e);
        // é™é»˜å¤±è´¥ï¼Œè®©ç”¨æˆ·æ­£å¸¸ä½¿ç”¨è¡¨å•
      }
    }

    // é¡µé¢åŠ è½½åæ‰§è¡Œåˆå§‹åŒ–
    åˆå§‹åŒ–é¡µé¢();
  </script>
</body>
</html>
